"use strict";(self.webpackChunkdefang_docs=self.webpackChunkdefang_docs||[]).push([[2071],{6116:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/header-379caa18ec71bf543fbaf68619ce085d.png"},18300:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>c,frontMatter:()=>o,metadata:()=>a,toc:()=>d});var a=t(53006),i=t(74848),s=t(28453);const o={title:"Deploying Defang with Defang: Part 1",author:"Defang Team",tags:["defang-with-defang","deployment","defang-portal"]},r=void 0,l={authorsImageUrls:[void 0]},d=[{value:"<strong>The Initial Setup: A More Complex Deployment</strong>",id:"the-initial-setup-a-more-complex-deployment",level:2}];function g(e){const n={h2:"h2",hr:"hr",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Defang Compose Update",src:t(6116).A+"",width:"1200",height:"630"})}),"\n",(0,i.jsx)(n.p,{children:"Deploying applications is hard. Deploying complex, multi-service applications is even harder. When we first built the Defang Portal, we quickly recognized the complexity required to deploy it, even with the early Defang tooling helping us simplify it a lot. But we\u2019ve worked a lot to expand Defang\u2019s capabilities over the last year+ so it could take on more of the work and simplify that process."}),"\n",(0,i.jsx)(n.p,{children:"This evolution wasn\u2019t just based on our own instincts and what we saw in the Portal\u2014it was informed by listening to developers who have been using Defang, as well as our experience building dozens of sample projects for different frameworks and languages. Each time we build a new sample, we learn more about the different requirements of various types of applications and developers and refine Defang\u2019s feature set accordingly. The Portal became an extension of this learning process, serving as both a proving ground and an opportunity to close any remaining gaps, since it\u2019s one of the most complex things we\u2019ve built with Defang."}),"\n",(0,i.jsx)(n.p,{children:"Finally, though, the Defang Portal\u2014an application with six services, including two managed data stores, authentication, and a frontend\u2014is fully deployed using just Docker Compose files and the Defang CLI using GitHub Actions."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"the-initial-setup-a-more-complex-deployment",children:(0,i.jsx)(n.strong,{children:"The Initial Setup: A More Complex Deployment"})}),"\n",(0,i.jsxs)(n.p,{children:["The Portal isn\u2019t a simple static website; it\u2019s a ",(0,i.jsx)(n.strong,{children:"full-stack application"})," with the following services:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Next.js frontend"})," \u2013 Including server components and server actions."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Hasura (GraphQL API)"})," \u2013 Serves as a GraphQL layer."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Hono (TypeScript API)"})," \u2013 Lightweight API for custom business logic."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"OpenAuth (Authentication Service)"})," \u2013 Manages authentication flows."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Redis"})," \u2013 Used for caching and session storage."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Postgres"})," \u2013 The main database."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Initially, we provisioned databases and some DNS configurations using Infra-as-Code because Defang couldn\u2019t yet manage them for us. We also deployed the services themselves manually through infrastructure-as-code, requiring us to define each service separately."}),"\n",(0,i.jsx)(n.p,{children:"This worked, but seemed unnecessarily complex, if we had the right tooling\u2026"})]})}function c(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(g,{...e})}):g(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>r});var a=t(96540);const i={},s=a.createContext(i);function o(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),a.createElement(s.Provider,{value:n},e.children)}},53006:e=>{e.exports=JSON.parse('{"permalink":"/blog/2025/03/14/deploying-defang-with-defang-part-1","source":"@site/blog/2025-03-14-deploying-defang-with-defang-part-1.md","title":"Deploying Defang with Defang: Part 1","description":"Defang Compose Update","date":"2025-03-14T00:00:00.000Z","tags":[{"inline":true,"label":"defang-with-defang","permalink":"/blog/tags/defang-with-defang"},{"inline":true,"label":"deployment","permalink":"/blog/tags/deployment"},{"inline":true,"label":"defang-portal","permalink":"/blog/tags/defang-portal"}],"readingTime":4.38,"hasTruncateMarker":true,"authors":[{"name":"Defang Team","key":null,"page":null}],"frontMatter":{"title":"Deploying Defang with Defang: Part 1","author":"Defang Team","tags":["defang-with-defang","deployment","defang-portal"]},"unlisted":false,"prevItem":{"title":"February 2025 Defang Compose Update","permalink":"/blog/2025/03/15/feb-product-updates"},"nextItem":{"title":"Introducing Defang\'s New Look: Website & Logo Refresh","permalink":"/blog/2025/03/12/website-logo-refresh-announcement"}}')}}]);