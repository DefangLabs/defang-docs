"use strict";(self.webpackChunkdefang_docs=self.webpackChunkdefang_docs||[]).push([[4234],{28453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>r});var o=i(96540);const a={},s=o.createContext(a);function t(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),o.createElement(s.Provider,{value:n},e.children)}},87586:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>u,frontMatter:()=>s,metadata:()=>r,toc:()=>c});var o=i(74848),a=i(28453);const s={sidebar_position:400,title:"Configure Environment Variables",description:"How to configure sensitive environment variables in Defang."},t="Configure Environment Variables",r={id:"tutorials/configure-environment-variables",title:"Configure Environment Variables",description:"How to configure sensitive environment variables in Defang.",source:"@site/docs/tutorials/configure-environment-variables.md",sourceDirName:"tutorials",slug:"/tutorials/configure-environment-variables",permalink:"/docs/tutorials/configure-environment-variables",draft:!1,unlisted:!1,editUrl:"https://github.com/DefangLabs/defang-docs/tree/main/docs/tutorials/configure-environment-variables.md",tags:[],version:"current",sidebarPosition:400,frontMatter:{sidebar_position:400,title:"Configure Environment Variables",description:"How to configure sensitive environment variables in Defang."},sidebar:"docsSidebar",previous:{title:"Using 1-Click Deploy",permalink:"/docs/tutorials/using-one-click-deploy"},next:{title:"Deploy Using Pulumi",permalink:"/docs/tutorials/deploy-using-pulumi"}},l={},c=[{value:"Pre-requisites",id:"pre-requisites",level:2},{value:"Step 1 - Go to your <code>compose.yaml</code> file",id:"step-1---go-to-your-composeyaml-file",level:2},{value:"Step 2 - Set the actual value in the Defang CLI",id:"step-2---set-the-actual-value-in-the-defang-cli",level:2},{value:"Editing a config value",id:"editing-a-config-value",level:3},{value:"Removing a config value",id:"removing-a-config-value",level:3},{value:"Step 3 - Deploy",id:"step-3---deploy",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"configure-environment-variables",children:"Configure Environment Variables"}),"\n",(0,o.jsx)(n.p,{children:"This tutorial will show you how to configure sensitive environment variables in Defang."}),"\n",(0,o.jsx)(n.h2,{id:"pre-requisites",children:"Pre-requisites"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsxs)(n.a,{href:"https://docs.docker.com/compose/gettingstarted/",children:["A ",(0,o.jsx)(n.code,{children:"compose.yaml"})," file in your project"]})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"/docs/concepts/authentication",children:"A Defang Account"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"/docs/getting-started#install-the-defang-cli",children:"The Defang CLI"})}),"\n"]}),"\n",(0,o.jsxs)(n.h2,{id:"step-1---go-to-your-composeyaml-file",children:["Step 1 - Go to your ",(0,o.jsx)(n.code,{children:"compose.yaml"})," file"]}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:["If you are using ",(0,o.jsx)(n.a,{href:"/docs/concepts/pulumi",children:"Pulumi"})," instead of Compose files to define your services, please see ",(0,o.jsx)(n.a,{href:"/docs/concepts/configuration#using-config-with-pulumi",children:"Using Config With Pulumi"})," instead."]})}),"\n",(0,o.jsxs)(n.p,{children:["In your Compose file, you can define a sensitive config variable for your service by leaving it as a ",(0,o.jsxs)(n.strong,{children:["blank or ",(0,o.jsx)(n.code,{children:"null"})," value"]}),". Defang will recognize it as a sensitive value."]}),"\n",(0,o.jsxs)(n.p,{children:["In the example below, let's define ",(0,o.jsx)(n.code,{children:"API_KEY"})," as an environment variable."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"services:\n  service1:\n    image: image1:latest\n    environment:\n      - API_KEY\n"})}),"\n",(0,o.jsxs)(n.p,{children:["The type of notation shown above is called ",(0,o.jsx)(n.em,{children:"list notation"}),". Alternatively, you can use ",(0,o.jsx)(n.em,{children:"map notation"}),", which is also acceptable:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"services:\n  service1:\n    image: image1:latest\n    environment:\n      API_KEY:\n"})}),"\n",(0,o.jsx)(n.h2,{id:"step-2---set-the-actual-value-in-the-defang-cli",children:"Step 2 - Set the actual value in the Defang CLI"}),"\n",(0,o.jsx)(n.p,{children:"To store the actual (sensitive) value of the variable, open up a terminal and type the command:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"defang config set API_KEY=actualvalue\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Remember to replace ",(0,o.jsx)(n.code,{children:"API_KEY"})," with your variable name and ",(0,o.jsx)(n.code,{children:"actualvalue"})," with your actual value."]}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsxs)(n.p,{children:["You can view all the config variables you are storing in Defang by doing: ",(0,o.jsx)(n.code,{children:"defang config ls"}),"."]})}),"\n",(0,o.jsx)(n.h3,{id:"editing-a-config-value",children:"Editing a config value"}),"\n",(0,o.jsx)(n.p,{children:"To edit a value, you can run the command again with an updated value to overwrite the current value:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"defang config set API_KEY=newvalue\n"})}),"\n",(0,o.jsx)(n.h3,{id:"removing-a-config-value",children:"Removing a config value"}),"\n",(0,o.jsx)(n.p,{children:"To remove a value, run the command:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"defang config rm API_KEY\n"})}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsx)(n.p,{children:"Remember to update your Compose file if you remove an environment variable."})}),"\n",(0,o.jsx)(n.h2,{id:"step-3---deploy",children:"Step 3 - Deploy"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"defang compose up\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsxs)(n.p,{children:["For a deeper discussion on how configuration works in Defang, see our ",(0,o.jsx)(n.a,{href:"/docs/concepts/configuration",children:"Configuration docs"}),"."]})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}}}]);