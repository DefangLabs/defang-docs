"use strict";(self.webpackChunkdefang_docs=self.webpackChunkdefang_docs||[]).push([[8118],{28453:(e,n,o)=>{o.d(n,{R:()=>r,x:()=>c});var s=o(96540);const t={},i=s.createContext(t);function r(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(i.Provider,{value:n},e.children)}},28653:(e,n,o)=>{o.d(n,{A:()=>s});const s=o.p+"assets/images/vscode-6d9b6219505e45a68463f86807f93f0e.png"},43305:(e,n,o)=>{o.d(n,{A:()=>s});const s=o.p+"assets/images/windsurf-d7ebfb6700b526f573f81d989fa211ca.png"},44229:(e,n,o)=>{o.d(n,{A:()=>s});const s=o.p+"assets/images/cursor-6876b9c0575a3379b1dbb7dec6b94a3c.png"},45181:(e,n,o)=>{o.d(n,{A:()=>s});const s=o.p+"assets/images/claude-47ace032d3d4b06f00ac34f4c8090413.png"},74780:(e,n,o)=>{o.d(n,{A:()=>s});const s=o.p+"assets/images/diagram-b2d3c06934ff5aef9e75d5153237f5fd.png"},77126:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>c,toc:()=>l});var s=o(74848),t=o(28453);const i={title:"MCP Server",description:"Model Context Protocol (MCP) Server with built-in tools to allow users to deploy with Defang through a supported IDE.","sidebar-position":200},r="Model Context Protocol (MCP) Server",c={id:"concepts/mcp",title:"MCP Server",description:"Model Context Protocol (MCP) Server with built-in tools to allow users to deploy with Defang through a supported IDE.",source:"@site/docs/concepts/mcp.md",sourceDirName:"concepts",slug:"/concepts/mcp",permalink:"/docs/concepts/mcp",draft:!1,unlisted:!1,editUrl:"https://github.com/DefangLabs/defang-docs/tree/main/docs/concepts/mcp.md",tags:[],version:"current",frontMatter:{title:"MCP Server",description:"Model Context Protocol (MCP) Server with built-in tools to allow users to deploy with Defang through a supported IDE.","sidebar-position":200},sidebar:"docsSidebar",previous:{title:"Local Development",permalink:"/docs/concepts/local-development"},next:{title:"FAQ",permalink:"/docs/category/faq"}},d={},l=[{value:"Installation",id:"installation",level:2},{value:"Supported IDEs",id:"supported-ides",level:2},{value:"Cursor",id:"cursor",level:3},{value:"Windsurf",id:"windsurf",level:3},{value:"VS Code",id:"vs-code",level:3},{value:"VS Code Insiders",id:"vs-code-insiders",level:3},{value:"Kiro",id:"kiro",level:3},{value:"Claude Desktop",id:"claude-desktop",level:3},{value:"MCP Tools",id:"mcp-tools",level:2},{value:"<code>deploy</code>",id:"deploy",level:3},{value:"<code>services</code>",id:"services",level:3},{value:"<code>destroy</code>",id:"destroy",level:3},{value:"<code>estimate</code>",id:"estimate",level:3},{value:"<code>list_configs</code>",id:"list_configs",level:3},{value:"<code>set_config</code>",id:"set_config",level:3},{value:"<code>remove_config</code>",id:"remove_config",level:3},{value:"Example Prompts",id:"example-prompts",level:2}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"model-context-protocol-mcp-server",children:"Model Context Protocol (MCP) Server"}),"\n",(0,s.jsxs)(n.p,{children:["The Defang ",(0,s.jsx)(n.a,{href:"https://github.com/DefangLabs/defang/tree/main/src/pkg/mcp",children:"Model Context Protocol (MCP) Server"})," includes built-in tools to allow users to deploy and manage cloud services through a supported IDE."]}),"\n",(0,s.jsx)(n.p,{children:"Using this MCP Server with an IDE will enable the AI coding agent (e.g. Copilot) to use Defang tools and resources to perform tasks, such as deploying a service to the cloud. This means you can now use Defang with IDE-integrated AI coding agents."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Defang MCP Server Diagram",src:o(74780).A+"",width:"2778",height:"1361"})}),"\n",(0,s.jsxs)(n.p,{children:["For more details about MCP architecture, visit the ",(0,s.jsx)(n.a,{href:"https://modelcontextprotocol.io/introduction",children:"official MCP documentation"}),"."]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["This page is a guide to the Defang MCP Server detailing its installation, tools, and usage. If you are looking for an example of how you can deploy a MCP project with Defang, please instead refer to our ",(0,s.jsx)(n.a,{href:"https://github.com/DefangLabs/samples/tree/main/samples/mcp",children:"MCP sample application"}),"."]})}),"\n",(0,s.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsxs)(n.p,{children:["Ensure that you have the ",(0,s.jsx)(n.a,{href:"/docs/getting-started#install-the-defang-cli",children:"Defang CLI"})," installed."]}),"\n",(0,s.jsxs)(n.p,{children:["Run the setup command in your terminal for your IDE of choice from the ",(0,s.jsx)(n.a,{href:"#supported-ides",children:"Supported IDEs"})," section. This will connect the Defang MCP Server to your IDE. The general format of the command is as follows:"]}),"\n",(0,s.jsxs)(n.admonition,{title:"Recommended Installation",type:"tip",children:[(0,s.jsxs)(n.p,{children:["Install the ",(0,s.jsx)(n.a,{href:"/docs/getting-started#install-the-defang-cli",children:"Defang CLI"})," using ",(0,s.jsx)(n.a,{href:"https://curl.se/",children:"Curl"})," or ",(0,s.jsx)(n.a,{href:"https://brew.sh/",children:"Homebrew"})]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"defang mcp setup --client=<your-ide>\n"})})]}),"\n",(0,s.jsx)(n.p,{children:"Once the command completes, you may need to restart your IDE for the changes to take effect."}),"\n",(0,s.jsx)(n.p,{children:"Once the MCP Server is running, you can access the Defang MCP tools directly through the AI agent chat in your IDE."}),"\n",(0,s.jsxs)(n.p,{children:["That's it! Feel free to explore our ",(0,s.jsx)(n.a,{href:"#example-prompts",children:"Example Prompts"})," to get ideas on how to interact with the AI agent and make the most of the Defang MCP Server."]}),"\n",(0,s.jsxs)(n.p,{children:["Note that ",(0,s.jsx)(n.code,{children:"npx"})," installation is supported, but not recommended."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npx -y defang@latest mcp setup --client=<your-ide>\n"})}),"\n",(0,s.jsx)(n.h2,{id:"supported-ides",children:"Supported IDEs"}),"\n",(0,s.jsx)(n.h3,{id:"cursor",children:"Cursor"}),"\n",(0,s.jsx)(n.p,{children:"Setup command:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"defang mcp setup --client=cursor\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Once setup is complete, you can interact with the AI coding agent using Defang-related actions like ",(0,s.jsx)(n.code,{children:"check defang services"})," or ",(0,s.jsx)(n.a,{href:"#example-prompts",children:"other prompts"}),". Here's an example of what it could look like:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Cursor",src:o(44229).A+"",width:"2294",height:"1446"})}),"\n",(0,s.jsx)(n.h3,{id:"windsurf",children:"Windsurf"}),"\n",(0,s.jsx)(n.p,{children:"Setup command:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"defang mcp setup --client=windsurf\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Once setup is complete, you can interact with the AI coding agent using Defang-related actions like ",(0,s.jsx)(n.code,{children:"check defang services"})," or ",(0,s.jsx)(n.a,{href:"#example-prompts",children:"other prompts"}),". Here's an example of what it could look like:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Windsurf",src:o(43305).A+"",width:"2294",height:"1434"})}),"\n",(0,s.jsx)(n.h3,{id:"vs-code",children:"VS Code"}),"\n",(0,s.jsx)(n.p,{children:"Setup command:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"defang mcp setup --client=vscode\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Once setup is complete, you can interact with the AI coding agent using Defang-related actions like ",(0,s.jsx)(n.code,{children:"check defang services"})," or ",(0,s.jsx)(n.a,{href:"#example-prompts",children:"other prompts"}),". Here's an example of what it could look like:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"VS Code",src:o(28653).A+"",width:"2294",height:"1434"})}),"\n",(0,s.jsx)(n.h3,{id:"vs-code-insiders",children:"VS Code Insiders"}),"\n",(0,s.jsx)(n.p,{children:"Setup command:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"defang mcp setup --client=vscode-insiders\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Once setup is complete, you can interact with the AI coding agent using Defang-related actions like ",(0,s.jsx)(n.code,{children:"check defang services"})," or ",(0,s.jsx)(n.a,{href:"#example-prompts",children:"other prompts"}),". Here's an example of what it could look like:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"VS Code",src:o(97797).A+"",width:"2179",height:"1169"})}),"\n",(0,s.jsx)(n.h3,{id:"kiro",children:"Kiro"}),"\n",(0,s.jsx)(n.p,{children:"Setup command:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"defang mcp setup --client=kiro\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Once setup is complete, you can interact with the AI coding agent using Defang-related actions like ",(0,s.jsx)(n.code,{children:"check defang services"})," or ",(0,s.jsx)(n.a,{href:"#example-prompts",children:"other prompts"}),". Here's an example of what it could look like:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Kiro",src:o(89210).A+"",width:"2439",height:"1558"})}),"\n",(0,s.jsx)(n.h3,{id:"claude-desktop",children:"Claude Desktop"}),"\n",(0,s.jsx)(n.p,{children:"While this is not an IDE in the traditional sense, it can support MCP servers. For a smoother experience, consider specifying a project name or directory when making chat prompts to this platform."}),"\n",(0,s.jsx)(n.p,{children:"Setup command:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"defang mcp setup --client=claude\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Once setup is complete, you can interact with the AI coding agent using Defang-related actions like ",(0,s.jsx)(n.code,{children:"check defang services"})," or ",(0,s.jsx)(n.a,{href:"#example-prompts",children:"other prompts"}),". Here's an example of what it could look like:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Claude Desktop",src:o(45181).A+"",width:"2294",height:"1428"})}),"\n",(0,s.jsx)(n.h2,{id:"mcp-tools",children:"MCP Tools"}),"\n",(0,s.jsx)(n.p,{children:"Below are the tools available in the Defang MCP Server."}),"\n",(0,s.jsx)(n.h3,{id:"deploy",children:(0,s.jsx)(n.code,{children:"deploy"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"deploy"})," tool scans your project directory for Dockerfiles and ",(0,s.jsx)(n.code,{children:"compose.yaml"})," files, then deploys the detected service(s) using Defang. You can monitor the deployment process in the Defang Portal."]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["The Defang MCP Server currently supports deployments to ",(0,s.jsx)(n.a,{href:"/docs/providers/playground",children:"Defang Playground"}),". We plan to support BYOC in future updates."]})}),"\n",(0,s.jsx)(n.h3,{id:"services",children:(0,s.jsx)(n.code,{children:"services"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"services"})," tool displays the details of all your services that are currently deployed in your project with Defang. It shows the Service Name, Deployment ID, Public URL and Service Status. If there are no services found, it will display an appropriate message."]}),"\n",(0,s.jsx)(n.h3,{id:"destroy",children:(0,s.jsx)(n.code,{children:"destroy"})}),"\n",(0,s.jsxs)(n.p,{children:["Given a project name or directory, the ",(0,s.jsx)(n.code,{children:"destroy"})," tool identifies any services deployed with Defang and terminates them. If no services are found, it will display an appropriate message."]}),"\n",(0,s.jsx)(n.h3,{id:"estimate",children:(0,s.jsx)(n.code,{children:"estimate"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"estimate"})," tool scan your project directory and considers your ",(0,s.jsx)(n.a,{href:"/docs/concepts/deployment-modes",children:"deployment mode"})," (which defaults to ",(0,s.jsx)(n.code,{children:"AFFORDABLE"}),") to provide a ",(0,s.jsx)(n.a,{href:"/docs/concepts/estimation",children:"cost estimation"})," for your project. Currently, the tool supports two providers: ",(0,s.jsx)(n.code,{children:"AWS"})," or ",(0,s.jsx)(n.code,{children:"GCP"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"list_configs",children:(0,s.jsx)(n.code,{children:"list_configs"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"list_configs"})," tool will ",(0,s.jsx)(n.a,{href:"/docs/cli/defang_config",children:"list"})," all the Defang configs set for your project."]}),"\n",(0,s.jsx)(n.h3,{id:"set_config",children:(0,s.jsx)(n.code,{children:"set_config"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"set_config"})," tool will ",(0,s.jsx)(n.a,{href:"/docs/tutorials/configure-environment-variables#step-2---set-the-actual-value-in-the-defang-cli",children:"set"})," a specific Defang config for your project."]}),"\n",(0,s.jsx)(n.h3,{id:"remove_config",children:(0,s.jsx)(n.code,{children:"remove_config"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"remove_config"})," tool will ",(0,s.jsx)(n.a,{href:"/docs/tutorials/configure-environment-variables#removing-a-config-value",children:"remove"})," a specific Defang config for your project."]}),"\n",(0,s.jsx)(n.h2,{id:"example-prompts",children:"Example Prompts"}),"\n",(0,s.jsx)(n.p,{children:"After connecting the Defang MCP Server to your IDE using an installation method, you can type in prompts in your chat to invoke the AI agent to use any MCP tool(s)."}),"\n",(0,s.jsx)(n.p,{children:"For example, you can ask the AI agent:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"can you deploy this to defang?\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"please destroy this project.\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"what services do I have?\n"})}),"\n",(0,s.jsx)(n.p,{children:"You can also choose to specify a project name or project directory if you do not have the project open:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"deploy this with defang /Users/yourname/Documents/project1\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"do I have a service called project1\n"})}),"\n",(0,s.jsx)(n.p,{children:"You can estimate the cost of a deployment to a supported cloud provider:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"can you estimate balance mode on aws for this project?\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"can you estimate how much this project will cost on gcp?\n"})}),"\n",(0,s.jsx)(n.p,{children:"You can list, set and remove Defang configs for a project:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"what defang configs do I have set for this project?\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"list all the defang configs I have set for this project\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"set the defang config DATABASE_URL to example.com\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"remove the defang config DATABASE_URL\n"})}),"\n",(0,s.jsx)(n.p,{children:"Feel free to try any of these prompts or create your own!"})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},89210:(e,n,o)=>{o.d(n,{A:()=>s});const s=o.p+"assets/images/kiro-f7b963589fab0edeba106caf3b4f6d28.png"},97797:(e,n,o)=>{o.d(n,{A:()=>s});const s=o.p+"assets/images/vscode-insiders-4b31efc14e0ddb6717286ad3fccbfc01.png"}}]);