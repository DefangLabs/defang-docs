"use strict";(self.webpackChunkdefang_docs=self.webpackChunkdefang_docs||[]).push([[740],{28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>i});var t=s(96540);const a={},c=t.createContext(a);function o(e){const n=t.useContext(c);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),t.createElement(c.Provider,{value:n},e.children)}},84005:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"concepts/stacks","title":"Stacks","description":"Defang supports deploying multiple instances of a project as separate stacks.","source":"@site/docs/concepts/stacks.md","sourceDirName":"concepts","slug":"/concepts/stacks","permalink":"/docs/concepts/stacks","draft":false,"unlisted":false,"editUrl":"https://github.com/DefangLabs/defang-docs/tree/main/docs/concepts/stacks.md","tags":[],"version":"current","frontMatter":{"title":"Stacks","description":"Defang supports deploying multiple instances of a project as separate stacks."},"sidebar":"conceptsSidebar","previous":{"title":"Services","permalink":"/docs/concepts/services"}}');var a=s(74848),c=s(28453);const o={title:"Stacks",description:"Defang supports deploying multiple instances of a project as separate stacks."},i="Stacks",r={},l=[{value:"Stack creation",id:"stack-creation",level:2},{value:"Stack deployment",id:"stack-deployment",level:2},{value:"Logging",id:"logging",level:2},{value:"Listing stacks",id:"listing-stacks",level:2},{value:"Internals",id:"internals",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,c.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"stacks",children:"Stacks"})}),"\n",(0,a.jsxs)(n.p,{children:["Defang supports deploying multiple instances of a project as separate ",(0,a.jsx)(n.em,{children:"stacks"}),". Each stack represents an isolated deployment of your project. Stacks allow you to manage different deployments of your project. For example, you can use stacks to support distinct development, staging, and production environments in the same cloud account. You can also use stacks to support deployments for different customers (e.g., Client A, Client B) or regions (e.g., North America, Europe) within the same project."]}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsxs)(n.p,{children:["Stacks is a new feature introduced in Defang CLI v2.4.0 and is currently in preview. We welcome your feedback! Please open an issue on ",(0,a.jsx)(n.a,{href:"https://github.com/DefangLabs/defang/issues",children:"GitHub"})," if you encounter any problems or have suggestions."]})}),"\n",(0,a.jsx)(n.h2,{id:"stack-creation",children:"Stack creation"}),"\n",(0,a.jsx)(n.p,{children:"You can create a new stack using the Defang CLI:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"defang stack new [stack-name]\n"})}),"\n",(0,a.jsx)(n.p,{children:"This command initializes a new stack. If you don't specify a name, Defang will prompt you to enter one."}),"\n",(0,a.jsxs)(n.p,{children:["After a stack is created, you will notice a new file in your working directory. If your stack was called ",(0,a.jsx)(n.code,{children:"production"}),", you will see a file called ",(0,a.jsx)(n.code,{children:".defang/production"}),". Defang will never add secrets to this file. We recommend you add this file to your source code repository so you can share it with other contributors."]}),"\n",(0,a.jsx)(n.h2,{id:"stack-deployment",children:"Stack deployment"}),"\n",(0,a.jsx)(n.p,{children:"After a stack has been created, you can deploy it independently of others:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"defang up --stack=<stack-name>\n"})}),"\n",(0,a.jsx)(n.h2,{id:"logging",children:"Logging"}),"\n",(0,a.jsx)(n.p,{children:"To view logs for a specific stack, use the following command:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"defang logs --stack=<stack-name>\n"})}),"\n",(0,a.jsx)(n.p,{children:"or to tail the logs in real-time:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"defang tail --stack=<stack-name>\n"})}),"\n",(0,a.jsx)(n.h2,{id:"listing-stacks",children:"Listing stacks"}),"\n",(0,a.jsx)(n.p,{children:"This command shows all stacks in your project."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"defang stack list\n\nNAME        PROVIDER  REGION     MODE\nproduction  aws       us-west-2  BALANCED  \n"})}),"\n",(0,a.jsx)(n.h2,{id:"internals",children:"Internals"}),"\n",(0,a.jsxs)(n.p,{children:["When you create a new stack, Defang creates a new file for that stack in the ",(0,a.jsx)(n.code,{children:".defang"})," subfolder of your project directory. This file contains all the configuration and state information specific to that stack. Here's an example:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-dotenv",children:"DEFANG_PROVIDER=aws\nAWS_REGION=us-west-2\nDEFANG_MODE=balanced\n"})}),"\n",(0,a.jsxs)(n.p,{children:["This file is very similar to ",(0,a.jsx)(n.code,{children:".env"})," files, but is specific to deployments of your project. This ensures that the values are not leaked into your runtime environment."]})]})}function p(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}}}]);