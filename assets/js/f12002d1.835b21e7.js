"use strict";(self.webpackChunkdefang_docs=self.webpackChunkdefang_docs||[]).push([[3561],{376:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>s,metadata:()=>n,toc:()=>u});const n=JSON.parse('{"id":"tutorials/deploying-from-github-actions/to-gcp","title":"Deploying to GCP","description":"Using the Defang Github Action to deploy your project to GCP from your CI/CD pipeline.","source":"@site/docs/tutorials/deploying-from-github-actions/to-gcp.mdx","sourceDirName":"tutorials/deploying-from-github-actions","slug":"/tutorials/deploying-from-github-actions/to-gcp","permalink":"/docs/tutorials/deploying-from-github-actions/to-gcp","draft":false,"unlisted":false,"editUrl":"https://github.com/DefangLabs/defang-docs/tree/main/docs/tutorials/deploying-from-github-actions/to-gcp.mdx","tags":[],"version":"current","frontMatter":{"title":"Deploying to GCP","description":"Using the Defang Github Action to deploy your project to GCP from your CI/CD pipeline."},"sidebar":"tutorialsSidebar","previous":{"title":"Deploying to AWS","permalink":"/docs/tutorials/deploying-from-github-actions/to-aws"},"next":{"title":"Deploying from GitHub Actions","permalink":"/docs/tutorials/deploying-from-github-actions"}}');var i=o(74848),r=o(28453),a=o(11470),l=o(19365);const s={title:"Deploying to GCP",description:"Using the Defang Github Action to deploy your project to GCP from your CI/CD pipeline."},c="Deploying to GCP from GitHub Actions",d={},u=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1 - Identify your GCP Project ID",id:"step-1---identify-your-gcp-project-id",level:2},{value:"Step 2 - Create a deployer Service Account",id:"step-2---create-a-deployer-service-account",level:2},{value:"Step 2 - Create a Workload Identity Pool",id:"step-2---create-a-workload-identity-pool",level:2},{value:"Create a Workload Identity Pool",id:"create-a-workload-identity-pool",level:3},{value:"Add a Workload Identity Provider to the Pool",id:"add-a-workload-identity-provider-to-the-pool",level:3},{value:"Create a Workload Identity Pool",id:"create-a-workload-identity-pool-1",level:3},{value:"Add a Workload Identity Provider",id:"add-a-workload-identity-provider",level:3},{value:"Configure Provider Attributes",id:"configure-provider-attributes",level:3},{value:"Configure Attribute Conditions",id:"configure-attribute-conditions",level:3},{value:"Step 3 - Grant your GCP service account access to the Workload Identity Pool",id:"step-3---grant-your-gcp-service-account-access-to-the-workload-identity-pool",level:2},{value:"Get the ID of the Workload Identity Pool we just created",id:"get-the-id-of-the-workload-identity-pool-we-just-created",level:3},{value:"Step 4 - Create a new GitHub Actions workflow",id:"step-4---create-a-new-github-actions-workflow",level:2}];function h(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"deploying-to-gcp-from-github-actions",children:"Deploying to GCP from GitHub Actions"})}),"\n",(0,i.jsxs)(t.p,{children:["This tutorial will show you how to use the ",(0,i.jsx)(t.a,{href:"https://github.com/DefangLabs/defang-github-action",children:"Defang GitHub Action"})," to deploy your project to GCP from your GitHub Actions workflow."]}),"\n",(0,i.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"/docs/concepts/authentication",children:"A Defang Account"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"https://docs.github.com/en/get-started/quickstart/create-a-repo",children:"A Github Repo"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"https://cloud.google.com",children:"A GCP Account"})}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"The following steps will guide you through setting up a GitHub Actions workflow that can assume a role in your GCP account using OpenID Connect (OIDC) and deploy your project using the Defang GitHub Action. The role which will be assumed must have a trust relationship with an OIDC identity provider (IdP) for GitHub Actions, and that trust relationship must be configured to allow the specific repository and branch to assume the role. This ultimately allows the GitHub Actions workflow to securely access your GCP resources without needing to store long-lived GCP credentials in your repository."}),"\n",(0,i.jsx)(t.h2,{id:"step-1---identify-your-gcp-project-id",children:"Step 1 - Identify your GCP Project ID"}),"\n",(0,i.jsx)(t.p,{children:"To configure the GitHub Action to assume a role in your GCP project, you'll need your GCP Project ID."}),"\n",(0,i.jsxs)(a.A,{children:[(0,i.jsxs)(l.A,{value:"cli",label:"gcloud CLI",default:!0,children:[(0,i.jsx)(t.p,{children:"You can list all of the projects you have access to with the following command:"}),(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:'gcloud projects list --format="value(projectId)"\nexport PROJECT_ID="my-project-123456" # export the project ID you want to use\n'})}),(0,i.jsx)(t.p,{children:"Identify the appropriate project ID from the list and keep it handy for the next steps."})]}),(0,i.jsx)(l.A,{value:"dashboard",label:"GCP Console",children:(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["Go to the ",(0,i.jsx)(t.a,{href:"https://console.cloud.google.com/",children:"GCP Console"}),"."]}),"\n",(0,i.jsx)(t.li,{children:"Click on the project dropdown in the top navigation bar."}),"\n",(0,i.jsx)(t.li,{children:"Identify the appropriate project from the list."}),"\n",(0,i.jsx)(t.li,{children:"Your Project ID will be listed next to the project name."}),"\n"]})})]}),"\n",(0,i.jsx)(t.h2,{id:"step-2---create-a-deployer-service-account",children:"Step 2 - Create a deployer Service Account"}),"\n",(0,i.jsxs)(a.A,{children:[(0,i.jsxs)(l.A,{value:"cli",label:"gcloud CLI",default:!0,children:[(0,i.jsx)(t.p,{children:"Using the gcloud CLI:"}),(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:'gcloud iam service-accounts create "deployer" \\\n  --description="Service account used by Defang for deployment" \\\n  --display-name="Deployer" \\\n  --project="${PROJECT_ID}"\n'})})]}),(0,i.jsxs)(l.A,{value:"dashboard",label:"GCP Console",children:[(0,i.jsx)(t.p,{children:"Using the GCP Console:"}),(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["Go to the ",(0,i.jsx)(t.a,{href:"https://console.cloud.google.com/iam-admin/serviceaccounts",children:"Service Accounts"})," page in the GCP Console."]}),"\n",(0,i.jsx)(t.li,{children:'Click "Create Service Account" at the top of the page.'}),"\n",(0,i.jsx)(t.li,{children:'For the Service account name, enter "Deployer"'}),"\n",(0,i.jsx)(t.li,{children:'For the Service account ID, enter "deployer"'}),"\n",(0,i.jsx)(t.li,{children:'For the Service account description, enter "Service account used by Defang for deployment"'}),"\n",(0,i.jsx)(t.li,{children:'Click "Create and Continue"'}),"\n",(0,i.jsx)(t.li,{children:'In the "Grant this service account access to the project" section, select the "Owner" role from the dropdown.'}),"\n",(0,i.jsx)(t.li,{children:'Click "Continue"'}),"\n",(0,i.jsx)(t.li,{children:'Click "Done"'}),"\n"]})]})]}),"\n",(0,i.jsx)(t.h2,{id:"step-2---create-a-workload-identity-pool",children:"Step 2 - Create a Workload Identity Pool"}),"\n",(0,i.jsx)(t.p,{children:"To configure the GitHub Action to assume a role in your GCP account, you'll need to create a Workload Identity Pool and a Workload Identity Provider in your GCP project."}),"\n",(0,i.jsxs)(t.admonition,{type:"warning",children:[(0,i.jsx)(t.p,{children:"Always add an Attribute Condition to restrict entry into the Workload Identity Pool."}),(0,i.jsxs)(t.p,{children:["We recommend replacing ",(0,i.jsx)(t.code,{children:"YOUR_REPOSITORY_OWNER"})," and ",(0,i.jsx)(t.code,{children:"YOUR_REPOSITORY_NAME"})," with your actual GitHub repository owner and name in the next step, and adjusting the ",(0,i.jsx)(t.code,{children:"assertion.ref"})," condition to match your deployment branch. If you want to allow access from any branch, you can omit the ",(0,i.jsx)(t.code,{children:"assertion.ref"})," condition."]}),(0,i.jsxs)(t.p,{children:["We also recommend configuring ",(0,i.jsx)(t.a,{href:"https://docs.github.com/en/actions/how-tos/deploy/configure-and-manage-deployments/control-deployments#using-environments",children:"GitHub Actions Environments"}),". If you do not configure environments, you can omit the ",(0,i.jsx)(t.code,{children:"assertion.environment"})," condition below."]})]}),"\n",(0,i.jsxs)(a.A,{children:[(0,i.jsxs)(l.A,{value:"cli",label:"gcloud CLI",default:!0,children:[(0,i.jsx)(t.p,{children:"Using the gcloud CLI:"}),(0,i.jsx)(t.h3,{id:"create-a-workload-identity-pool",children:"Create a Workload Identity Pool"}),(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:'gcloud iam workload-identity-pools create "defang-github-actions-pool" \\\n  --project="${PROJECT_ID}" \\\n  --location="global" \\\n  --display-name="Defang Github Actions Pool" \\\n  --description="Allow Defang to deploy from Github Actions"\n'})}),(0,i.jsx)(t.h3,{id:"add-a-workload-identity-provider-to-the-pool",children:"Add a Workload Identity Provider to the Pool"}),(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:'gcloud iam workload-identity-pools providers create-oidc "defang-github-actions-provider" \\\n  --project="${PROJECT_ID}" \\\n  --location="global" \\\n  --workload-identity-pool="defang-github-actions-pool" \\\n  --display-name="Defang Github Actions Provider" \\\n  --issuer-uri="https://token.actions.githubusercontent.com" \\\n  --attribute-mapping="google.subject=assertion.sub,attribute.actor=assertion.actor,attribute.repository=assertion.repository,attribute.repository_owner=assertion.repository_owner,attribute.environment=assertion.environment,attribute.ref=assertion.ref" \\\n  --attribute-condition="assertion.repository_owner == YOUR_REPOSITORY_OWNER && assertion.repository == \'YOUR_REPOSITORY_NAME\' && assertion.ref == \'refs/heads/main\' && assertion.environment == \'YOUR_ENVIRONMENT\'" \\\n'})})]}),(0,i.jsxs)(l.A,{value:"dashboard",label:"GCP Console",children:[(0,i.jsx)(t.p,{children:"Using the GCP Console:"}),(0,i.jsx)(t.h3,{id:"create-a-workload-identity-pool-1",children:"Create a Workload Identity Pool"}),(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["Go to the ",(0,i.jsx)(t.a,{href:"https://console.cloud.google.com/iam-admin/workload-identity-pools",children:"Workload Identity Pools"})," page in the GCP Console."]}),"\n",(0,i.jsx)(t.li,{children:'If you haven\'t created a pool before, click "Get started", or "Create Pool" if you have.'}),"\n",(0,i.jsx)(t.li,{children:'For the Name field, enter "Defang Github Actions Pool"'}),"\n",(0,i.jsx)(t.li,{children:'For the Pool ID field, enter "defang-github-actions-pool"'}),"\n",(0,i.jsx)(t.li,{children:'For the Description field, enter "Allow Defang to deploy from Github Actions"'}),"\n",(0,i.jsx)(t.li,{children:'Make sure "Enabled pool" is toggled to the "on" position.'}),"\n",(0,i.jsx)(t.li,{children:'Click "Continue"'}),"\n"]}),(0,i.jsx)(t.h3,{id:"add-a-workload-identity-provider",children:"Add a Workload Identity Provider"}),(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:['After creating the Workload Identity Pool, you should be on the "Add Provider" page. If not, navigate to the ',(0,i.jsx)(t.a,{href:"https://console.cloud.google.com/iam-admin/workload-identity-pools",children:"Workload Identity Pools"}),' page, click on the "defang-github-actions-pool", and then click "Add Provider".']}),"\n",(0,i.jsx)(t.li,{children:'Select the "OpenID Connect (OIDC)" provider from the "Select a Provider" dropdown.'}),"\n",(0,i.jsx)(t.li,{children:'For the Provider Name field, enter "Defang Github Actions Provider"'}),"\n",(0,i.jsx)(t.li,{children:'For the Provider ID field, enter "defang-github-actions-provider"'}),"\n",(0,i.jsxs)(t.li,{children:["For the Issuer URI field, enter ",(0,i.jsx)(t.code,{children:"https://token.actions.githubusercontent.com"})]}),"\n",(0,i.jsx)(t.li,{children:"You do not need to upload a JSON Web Key Set (JWKS) URI, so leave that field blank."}),"\n",(0,i.jsx)(t.li,{children:"Use the default audience"}),"\n",(0,i.jsx)(t.li,{children:'Click "Save"'}),"\n"]}),(0,i.jsx)(t.h3,{id:"configure-provider-attributes",children:"Configure Provider Attributes"}),(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["For the ",(0,i.jsx)(t.code,{children:"google.subject"})," attribute, the ",(0,i.jsx)(t.code,{children:"OIDC 1"})," attribute should be set to ",(0,i.jsx)(t.code,{children:"assertion.sub"}),"."]}),"\n",(0,i.jsxs)(t.li,{children:["Add a new attribute mapping for ",(0,i.jsx)(t.code,{children:"attribute.repository_owner"})," and set it to ",(0,i.jsx)(t.code,{children:"assertion.repository_owner"}),"."]}),"\n",(0,i.jsxs)(t.li,{children:["Add a new attribute mapping for ",(0,i.jsx)(t.code,{children:"attribute.repository"})," and set it to ",(0,i.jsx)(t.code,{children:"assertion.repository"}),"."]}),"\n",(0,i.jsxs)(t.li,{children:["Add a new attribute mapping for ",(0,i.jsx)(t.code,{children:"attribute.environment"})," and set it to ",(0,i.jsx)(t.code,{children:"assertion.environment"}),"."]}),"\n",(0,i.jsxs)(t.li,{children:["Add a new attribute mapping for ",(0,i.jsx)(t.code,{children:"attribute.ref"})," and set it to ",(0,i.jsx)(t.code,{children:"assertion.ref"}),"."]}),"\n"]}),(0,i.jsx)(t.h3,{id:"configure-attribute-conditions",children:"Configure Attribute Conditions"}),(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:'Click on "Add Condition"'}),"\n",(0,i.jsxs)(t.li,{children:["For the Condition CEL, we recommend entering the following condition, replacing ",(0,i.jsx)(t.code,{children:"YOUR_REPOSITORY_OWNER"})," and ",(0,i.jsx)(t.code,{children:"YOUR_REPOSITORY_NAME"})," with your actual GitHub repository owner and name."]}),"\n"]}),(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"attribute.repository_owner == 'YOUR_REPOSITORY_OWNER' && attribute.repository == 'YOUR_REPOSITORY_NAME' && attribute.ref == 'refs/heads/main'\n"})}),(0,i.jsxs)(t.ol,{start:"3",children:["\n",(0,i.jsx)(t.li,{children:'Click "Save"'}),"\n"]})]})]}),"\n",(0,i.jsx)(t.h2,{id:"step-3---grant-your-gcp-service-account-access-to-the-workload-identity-pool",children:"Step 3 - Grant your GCP service account access to the Workload Identity Pool"}),"\n",(0,i.jsxs)(a.A,{children:[(0,i.jsxs)(l.A,{value:"cli",label:"gcloud CLI",default:!0,children:[(0,i.jsx)(t.p,{children:"Using the gcloud CLI:"}),(0,i.jsx)(t.h3,{id:"get-the-id-of-the-workload-identity-pool-we-just-created",children:"Get the ID of the Workload Identity Pool we just created"}),(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:'WORKLOAD_IDENTITY_POOL_ID="$(\n  gcloud iam workload-identity-pools describe "defang-github-actions-pool" \\\n    --project="${PROJECT_ID}" \\\n    --location="global" \\\n    --format="value(name)"\n)"\n'})}),(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:'gcloud projects add-iam-policy-binding ${PROJECT_ID} \\\n  --member="serviceAccount:deployer@${PROJECT_ID}.iam.gserviceaccount.com" \\\n  --role="roles/owner"\n  --member="principalSet://iam.googleapis.com/${WORKLOAD_IDENTITY_POOL_ID}/attribute.repository/${REPO}"\n'})})]}),(0,i.jsxs)(l.A,{value:"dashboard",label:"GCP Console",children:[(0,i.jsx)(t.p,{children:"Using the GCP Console:"}),(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["Open the GCP Console and navigate to the ",(0,i.jsx)(t.a,{href:"https://console.cloud.google.com/iam-admin/workload-identity-pools/pool/defang-github-actions-pool",children:"Workload Identity Pool page for the pool we just created"}),"."]}),"\n",(0,i.jsx)(t.li,{children:'Click "Grant access" at the top of the page.'}),"\n",(0,i.jsx)(t.li,{children:'Click "Grant access using service account impersonation"'}),"\n",(0,i.jsx)(t.li,{children:'Select the "Deployer" service account we created earlier.'}),"\n",(0,i.jsxs)(t.li,{children:["Select principals:\na. Select ",(0,i.jsx)(t.code,{children:"repository"}),' from the "Attribute name" dropdown.\nb. Enter your GitHub repository name in the "Attribute value" field.']}),"\n",(0,i.jsx)(t.li,{children:'Click the "Save" button.'}),"\n"]})]})]}),"\n",(0,i.jsx)(t.h2,{id:"step-4---create-a-new-github-actions-workflow",children:"Step 4 - Create a new GitHub Actions workflow"}),"\n",(0,i.jsxs)(t.p,{children:["In your GitHub repository, create a new file at ",(0,i.jsx)(t.code,{children:".github/workflows/deploy.yml"})," with the following content:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-yaml",children:'name: Deploy with Defang\non:\n  push:\n    branches:\n      - main  # Change this to your default branch if it\'s not \'main\'\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    permissions:\n      contents: read\n      id-token: write\n    env:\n      GCP_PROJECT_ID: # Provide your GCP Project ID\n\n    steps:\n      - name: Configure GCP Credentials for Prod\n        uses: "google-github-actions/auth@v2"\n        with:\n          service_account: "deployer@${{ env.GCP_PROJECT_ID }}.iam.gserviceaccount.com"\n          workload_identity_provider: "projects/${{ env.GCP_PROJECT_ID }}/locations/global/workloadIdentityPools/defang-github-actions-pool/providers/defang-github-actions-provider"\n          token_format: access_token\n          access_token_scopes: https://www.googleapis.com/auth/cloud-platform\n\n      - name: Checkout Repo\n        uses: actions/checkout@v4\n\n      - name: Deploy\n        uses: DefangLabs/defang-github-action@v1.2.1\n        with:\n          mode: "balanced"\n          provider: "gcp"\n'})}),"\n",(0,i.jsxs)(t.p,{children:["Full documentation for configuring AWS and GCP credentials can be found in the ",(0,i.jsx)(t.a,{href:"https://github.com/DefangLabs/defang-github-action",children:"Defang GitHub Action repository"}),"."]})]})}function p(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},11470:(e,t,o)=>{o.d(t,{A:()=>w});var n=o(96540),i=o(18215),r=o(17559),a=o(23104),l=o(56347),s=o(205),c=o(57485),d=o(31682),u=o(70679);function h(e){return n.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:t,children:o}=e;return(0,n.useMemo)((()=>{const e=t??function(e){return h(e).map((({props:{value:e,label:t,attributes:o,default:n}})=>({value:e,label:t,attributes:o,default:n})))}(o);return function(e){const t=(0,d.XI)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,o])}function g({value:e,tabValues:t}){return t.some((t=>t.value===e))}function f({queryString:e=!1,groupId:t}){const o=(0,l.W6)(),i=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,c.aZ)(i),(0,n.useCallback)((e=>{if(!i)return;const t=new URLSearchParams(o.location.search);t.set(i,e),o.replace({...o.location,search:t.toString()})}),[i,o])]}function b(e){const{defaultValue:t,queryString:o=!1,groupId:i}=e,r=p(e),[a,l]=(0,n.useState)((()=>function({defaultValue:e,tabValues:t}){if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!g({value:e,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const o=t.find((e=>e.default))??t[0];if(!o)throw new Error("Unexpected error: 0 tabValues");return o.value}({defaultValue:t,tabValues:r}))),[c,d]=f({queryString:o,groupId:i}),[h,b]=function({groupId:e}){const t=function(e){return e?`docusaurus.tab.${e}`:null}(e),[o,i]=(0,u.Dv)(t);return[o,(0,n.useCallback)((e=>{t&&i.set(e)}),[t,i])]}({groupId:i}),m=(()=>{const e=c??h;return g({value:e,tabValues:r})?e:null})();(0,s.A)((()=>{m&&l(m)}),[m]);return{selectedValue:a,selectValue:(0,n.useCallback)((e=>{if(!g({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);l(e),d(e),b(e)}),[d,b,r]),tabValues:r}}var m=o(92303);const y={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var j=o(74848);function x({className:e,block:t,selectedValue:o,selectValue:n,tabValues:r}){const l=[],{blockElementScrollPositionUntilNextRender:s}=(0,a.a_)(),c=e=>{const t=e.currentTarget,i=l.indexOf(t),a=r[i].value;a!==o&&(s(t),n(a))},d=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const o=l.indexOf(e.currentTarget)+1;t=l[o]??l[0];break}case"ArrowLeft":{const o=l.indexOf(e.currentTarget)-1;t=l[o]??l[l.length-1];break}}t?.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":t},e),children:r.map((({value:e,label:t,attributes:n})=>(0,j.jsx)("li",{role:"tab",tabIndex:o===e?0:-1,"aria-selected":o===e,ref:e=>{l.push(e)},onKeyDown:d,onClick:c,...n,className:(0,i.A)("tabs__item",y.tabItem,n?.className,{"tabs__item--active":o===e}),children:t??e},e)))})}function v({lazy:e,children:t,selectedValue:o}){const r=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){const e=r.find((e=>e.props.value===o));return e?(0,n.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:r.map(((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==o})))})}function C(e){const t=b(e);return(0,j.jsxs)("div",{className:(0,i.A)(r.G.tabs.container,"tabs-container",y.tabList),children:[(0,j.jsx)(x,{...t,...e}),(0,j.jsx)(v,{...t,...e})]})}function w(e){const t=(0,m.A)();return(0,j.jsx)(C,{...e,children:h(e.children)},String(t))}},19365:(e,t,o)=>{o.d(t,{A:()=>a});o(96540);var n=o(18215);const i={tabItem:"tabItem_Ymn6"};var r=o(74848);function a({children:e,hidden:t,className:o}){return(0,r.jsx)("div",{role:"tabpanel",className:(0,n.A)(i.tabItem,o),hidden:t,children:e})}},28453:(e,t,o)=>{o.d(t,{R:()=>a,x:()=>l});var n=o(96540);const i={},r=n.createContext(i);function a(e){const t=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);