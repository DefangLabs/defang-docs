"use strict";(self.webpackChunkdefang_docs=self.webpackChunkdefang_docs||[]).push([[246],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>m});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=r.createContext({}),p=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},u=function(e){var n=p(e.components);return r.createElement(s.Provider,{value:n},e.children)},c="mdxType",g={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),c=p(t),d=a,m=c["".concat(s,".").concat(d)]||c[d]||g[d]||o;return t?r.createElement(m,i(i({ref:n},u),{},{components:t})):r.createElement(m,i({ref:n},u))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,i=new Array(o);i[0]=d;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[c]="string"==typeof e?e:a,i[1]=l;for(var p=2;p<o;p++)i[p]=t[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},1668:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>i,default:()=>g,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var r=t(7462),a=(t(7294),t(3905));const o={sidebar_position:2},i=void 0,l={unversionedId:"Tutorial",id:"Tutorial",title:"Tutorial",description:"Downloading CLI",source:"@site/docs/Tutorial.md",sourceDirName:".",slug:"/Tutorial",permalink:"/docs/Tutorial",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Tutorial.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Overview",permalink:"/docs/intro"},next:{title:"Samples",permalink:"/docs/category/samples"}},s={},p=[{value:"<strong>Downloading CLI</strong>",id:"downloading-cli",level:3},{value:"<strong>CLI Commands</strong>",id:"cli-commands",level:3},{value:"<strong>Generating code using AI assistance</strong>",id:"generating-code-using-ai-assistance",level:3},{value:"Using Docker Compose YML",id:"using-docker-compose-yml",level:3},{value:"Using Defang CLI Imperatively",id:"using-defang-cli-imperatively",level:3},{value:"Using the Defang TypeScript Pulumi provider:",id:"using-the-defang-typescript-pulumi-provider",level:3},{value:"<strong>Monitoring your app</strong>",id:"monitoring-your-app",level:3},{value:"<strong>Upgrading your app</strong>",id:"upgrading-your-app",level:3}],u={toc:p},c="wrapper";function g(e){let{components:n,...t}=e;return(0,a.kt)(c,(0,r.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h3",{id:"downloading-cli"},(0,a.kt)("strong",{parentName:"h3"},"Downloading CLI")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"go install \u2026\nnix-env \u2026\nnix profile \u2026\nbrew install \u2026\n")),(0,a.kt)("h3",{id:"cli-commands"},(0,a.kt)("strong",{parentName:"h3"},"CLI Commands")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"defang help\ndefang version\ndefang login\n")),(0,a.kt)("h3",{id:"generating-code-using-ai-assistance"},(0,a.kt)("strong",{parentName:"h3"},"Generating code using AI assistance")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"defang generate\n")),(0,a.kt)("h3",{id:"using-docker-compose-yml"},"Using Docker Compose YML"),(0,a.kt)("p",null,"Create a new file  ",(0,a.kt)("inlineCode",{parentName:"p"},"docker-compose.yml")," with the following contents:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"services:\n  service1:\n        image: nginx:latest\n")),(0,a.kt)("p",null,"Build and deploy your app to your environment:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"defang compose up --tail\n")),(0,a.kt)("h3",{id:"using-defang-cli-imperatively"},"Using Defang CLI Imperatively"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Using the Defang CLI imperatively with a pre-built container image:",(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"defang up --name service1 --image \u2026 --tail\n"))),(0,a.kt)("li",{parentName:"ul"},"Using the Defang CLI imperatively, building from local sources:",(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"defang up --name service1 --build . --tail\n")))),(0,a.kt)("h3",{id:"using-the-defang-typescript-pulumi-provider"},"Using the Defang TypeScript Pulumi provider:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},'const image = new docker.Image("\u2026", {\n    context: ".",\n});\n\nconst service1 = new defang.Service("\u2026", {\n    image: image.url,\n});\n')),(0,a.kt)("p",null,"By default, Pulumi will not touch the deployment if nothing has changed. Set ",(0,a.kt)("inlineCode",{parentName:"p"},"forceNewDeployment: true")," to instruct Pulumi to force the re-deployment of the service."),(0,a.kt)("h3",{id:"monitoring-your-app"},(0,a.kt)("strong",{parentName:"h3"},"Monitoring your app")),(0,a.kt)("p",null,"By default, all the output (stdout and stderr) from your app is routed through the Defang log cluster. You can view these logs in real-time. You can view logs for all your services, one service, or even one specific deployment of a service."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"From the CLI:",(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"defang tail --name service1\n"))),(0,a.kt)("li",{parentName:"ul"},"From the Defang portal:","  ",(0,a.kt)("a",{parentName:"li",href:"https://portal.defang.io/"},"https://portal.defang.io/"))),(0,a.kt)("h3",{id:"upgrading-your-app"},(0,a.kt)("strong",{parentName:"h3"},"Upgrading your app")),(0,a.kt)("p",null,"To upgrade your app (for example, updating the base image of your container) you can run the same update command as before and it will build and deploy the latest version. Your current version of the service will keep running and handling traffic while the new version is being built and deployed. Only after the new version passes the health checks and accepts traffic will the older version be stopped."))}g.isMDXComponent=!0}}]);