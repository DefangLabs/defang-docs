"use strict";(self.webpackChunkdefang_docs=self.webpackChunkdefang_docs||[]).push([[3136],{708:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>u,default:()=>m,frontMatter:()=>i,metadata:()=>l,toc:()=>d});var r=t(7624),a=t(2172),o=t(1268),s=t(5388);const i={title:"Pulumi",description:"Define your Defang services with Pulumi to integrate with other cloud resources.",sidebar_position:175},u="Pulumi",l={id:"concepts/pulumi",title:"Pulumi",description:"Define your Defang services with Pulumi to integrate with other cloud resources.",source:"@site/docs/concepts/pulumi.md",sourceDirName:"concepts",slug:"/concepts/pulumi",permalink:"/docs/concepts/pulumi",draft:!1,unlisted:!1,editUrl:"https://github.com/DefangLabs/defang-docs/tree/main/docs/concepts/pulumi.md",tags:[],version:"current",sidebarPosition:175,frontMatter:{title:"Pulumi",description:"Define your Defang services with Pulumi to integrate with other cloud resources.",sidebar_position:175},sidebar:"docsSidebar",previous:{title:"Compose",permalink:"/docs/concepts/compose"},next:{title:"Services",permalink:"/docs/concepts/services"}},c={},d=[{value:"Defang Pulumi Provider",id:"defang-pulumi-provider",level:2},{value:"Sample",id:"sample",level:2}];function p(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,a.M)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"pulumi",children:"Pulumi"}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsx)(n.p,{children:"Pulumi support is currently only available for Defang Playground. We are working on support for Defang BYOC."})}),"\n",(0,r.jsx)(n.p,{children:"You can use Pulumi to define your Defang services. This allows you to integrate your Defang services with other cloud resources."}),"\n",(0,r.jsx)(n.p,{children:"For example, you might define an Aiven PostgreSQL database in your Pulumi code and then use the outputs of that resource to configure the secrets to connect to the database in your Defang service."}),"\n",(0,r.jsx)(n.p,{children:"It also allows you to manage configuration for different environments using Pulumi's config system."}),"\n",(0,r.jsx)(n.h2,{id:"defang-pulumi-provider",children:"Defang Pulumi Provider"}),"\n",(0,r.jsxs)(n.p,{children:["To get started with Pulumi and Defang you will need to install the Defang provider in ",(0,r.jsx)(n.a,{href:"https://www.pulumi.com/learn/pulumi-fundamentals/create-a-pulumi-project/",children:"your Pulumi project"}),":"]}),"\n",(0,r.jsxs)(o.c,{children:[(0,r.jsx)(s.c,{value:"npm",label:"npm",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm i @defang-io/pulumi-defang\n"})})}),(0,r.jsx)(s.c,{value:"pnpm",label:"pnpm",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"pnpm i @defang-io/pulumi-defang\n"})})}),(0,r.jsx)(s.c,{value:"yarn",label:"yarn",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"yarn add @defang-io/pulumi-defang\n"})})})]}),"\n",(0,r.jsx)(n.h2,{id:"sample",children:"Sample"}),"\n",(0,r.jsx)(n.p,{children:"The following is a minimal example of a Pulumi program that defines a Defang service:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'import * as defang from "@defang-io/pulumi-defang/lib";\n\nconst service = new defang.DefangService("my-service", {\n    image: "strm/helloworld-http:latest",\n    ports: [{\n        target: 80,\n        mode: "ingress",\n        protocol: "http",\n    }],\n});\n'})})]})}function m(e={}){const{wrapper:n}={...(0,a.M)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},5388:(e,n,t)=>{t.d(n,{c:()=>s});t(1504);var r=t(4971);const a={tabItem:"tabItem_Ymn6"};var o=t(7624);function s(e){let{children:n,hidden:t,className:s}=e;return(0,o.jsx)("div",{role:"tabpanel",className:(0,r.c)(a.tabItem,s),hidden:t,children:n})}},1268:(e,n,t)=>{t.d(n,{c:()=>j});var r=t(1504),a=t(4971),o=t(3943),s=t(5592),i=t(5288),u=t(632),l=t(7128),c=t(1148);function d(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:n,children:t}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return d(e).map((e=>{let{props:{value:n,label:t,attributes:r,default:a}}=e;return{value:n,label:t,attributes:r,default:a}}))}(t);return function(e){const n=(0,l.w)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function m(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function f(e){let{queryString:n=!1,groupId:t}=e;const a=(0,s.Uz)(),o=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,u._M)(o),(0,r.useCallback)((e=>{if(!o)return;const n=new URLSearchParams(a.location.search);n.set(o,e),a.replace({...a.location,search:n.toString()})}),[o,a])]}function h(e){const{defaultValue:n,queryString:t=!1,groupId:a}=e,o=p(e),[s,u]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!m({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const r=t.find((e=>e.default))??t[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:o}))),[l,d]=f({queryString:t,groupId:a}),[h,g]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[a,o]=(0,c.IN)(t);return[a,(0,r.useCallback)((e=>{t&&o.set(e)}),[t,o])]}({groupId:a}),b=(()=>{const e=l??h;return m({value:e,tabValues:o})?e:null})();(0,i.c)((()=>{b&&u(b)}),[b]);return{selectedValue:s,selectValue:(0,r.useCallback)((e=>{if(!m({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);u(e),d(e),g(e)}),[d,g,o]),tabValues:o}}var g=t(3664);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=t(7624);function y(e){let{className:n,block:t,selectedValue:r,selectValue:s,tabValues:i}=e;const u=[],{blockElementScrollPositionUntilNextRender:l}=(0,o.MV)(),c=e=>{const n=e.currentTarget,t=u.indexOf(n),a=i[t].value;a!==r&&(l(n),s(a))},d=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=u.indexOf(e.currentTarget)+1;n=u[t]??u[0];break}case"ArrowLeft":{const t=u.indexOf(e.currentTarget)-1;n=u[t]??u[u.length-1];break}}n?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.c)("tabs",{"tabs--block":t},n),children:i.map((e=>{let{value:n,label:t,attributes:o}=e;return(0,v.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>u.push(e),onKeyDown:d,onClick:c,...o,className:(0,a.c)("tabs__item",b.tabItem,o?.className,{"tabs__item--active":r===n}),children:t??n},n)}))})}function x(e){let{lazy:n,children:t,selectedValue:a}=e;const o=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=o.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:o.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==a})))})}function w(e){const n=h(e);return(0,v.jsxs)("div",{className:(0,a.c)("tabs-container",b.tabList),children:[(0,v.jsx)(y,{...e,...n}),(0,v.jsx)(x,{...e,...n})]})}function j(e){const n=(0,g.c)();return(0,v.jsx)(w,{...e,children:d(e.children)},String(n))}},2172:(e,n,t)=>{t.d(n,{I:()=>i,M:()=>s});var r=t(1504);const a={},o=r.createContext(a);function s(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);