"use strict";(self.webpackChunkdefang_docs=self.webpackChunkdefang_docs||[]).push([[8001],{26286:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>p,frontMatter:()=>o,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"concepts/workspaces","title":"Workspaces","description":"Workspaces organize teams and manage billing for Defang deployments.","source":"@site/docs/concepts/workspaces.md","sourceDirName":"concepts","slug":"/concepts/workspaces","permalink":"/docs/concepts/workspaces","draft":false,"unlisted":false,"editUrl":"https://github.com/DefangLabs/defang-docs/tree/main/docs/concepts/workspaces.md","tags":[],"version":"current","frontMatter":{"title":"Workspaces","description":"Workspaces organize teams and manage billing for Defang deployments."},"sidebar":"conceptsSidebar","previous":{"title":"Stacks","permalink":"/docs/concepts/stacks"}}');var r=s(74848),i=s(28453);const o={title:"Workspaces",description:"Workspaces organize teams and manage billing for Defang deployments."},c="Workspaces",t={},l=[{value:"Types of Workspaces",id:"types-of-workspaces",level:2},{value:"Personal Workspace",id:"personal-workspace",level:3},{value:"Defang-Managed Workspaces",id:"defang-managed-workspaces",level:3},{value:"Provider-Managed Workspaces",id:"provider-managed-workspaces",level:3},{value:"Creating a Workspace",id:"creating-a-workspace",level:2},{value:"Using Workspaces with the CLI",id:"using-workspaces-with-the-cli",level:2},{value:"Specifying a Workspace",id:"specifying-a-workspace",level:3},{value:"Listing Workspaces",id:"listing-workspaces",level:3},{value:"Viewing Current Workspace",id:"viewing-current-workspace",level:3},{value:"Workspace Membership",id:"workspace-membership",level:2},{value:"Defang-Managed Workspaces",id:"defang-managed-workspaces-1",level:3},{value:"Provider-Managed Workspaces",id:"provider-managed-workspaces-1",level:3},{value:"How Workspaces Relate to Projects",id:"how-workspaces-relate-to-projects",level:2},{value:"CI/CD Integration",id:"cicd-integration",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"workspaces",children:"Workspaces"})}),"\n",(0,r.jsx)(n.p,{children:"Workspaces are the primary way to organize teams and manage billing in Defang. A workspace represents a billing context that can be shared among team members, allowing multiple developers to deploy services under a team subscription."}),"\n",(0,r.jsx)(n.h2,{id:"types-of-workspaces",children:"Types of Workspaces"}),"\n",(0,r.jsx)(n.p,{children:"Defang supports three types of workspaces:"}),"\n",(0,r.jsx)(n.h3,{id:"personal-workspace",children:"Personal Workspace"}),"\n",(0,r.jsx)(n.p,{children:"When you create a Defang account, a personal workspace is automatically created using your username. This workspace:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Cannot be deleted"}),"\n",(0,r.jsx)(n.li,{children:"Cannot have additional members"}),"\n",(0,r.jsx)(n.li,{children:"Is always available as your default workspace"}),"\n",(0,r.jsx)(n.li,{children:"Can have a subscription attached for individual use"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"defang-managed-workspaces",children:"Defang-Managed Workspaces"}),"\n",(0,r.jsxs)(n.p,{children:["You can create additional workspaces directly in the ",(0,r.jsx)(n.a,{href:"/docs/concepts/portal",children:"Defang Portal"}),". These workspaces:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Can be renamed or deleted by the owner"}),"\n",(0,r.jsx)(n.li,{children:"Support inviting team members via invite links"}),"\n",(0,r.jsx)(n.li,{children:"Allow full membership management within Defang"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"provider-managed-workspaces",children:"Provider-Managed Workspaces"}),"\n",(0,r.jsx)(n.p,{children:"When you log in with GitHub or GitLab and authorize Defang to access your organizations, workspaces are automatically created for each authorized organization. These workspaces:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Cannot be deleted (the organization must be disconnected from Defang)"}),"\n",(0,r.jsx)(n.li,{children:"Cannot have members directly invited: membership is managed through your Git provider"}),"\n",(0,r.jsx)(n.li,{children:"The user who initially connects the organization becomes the workspace owner with billing access"}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsx)(n.p,{children:"Ownership transfer for provider-managed workspaces is not yet implemented. The user who connects an organization remains the billing contact."})}),"\n",(0,r.jsx)(n.h2,{id:"creating-a-workspace",children:"Creating a Workspace"}),"\n",(0,r.jsx)(n.p,{children:"To create a Defang-managed workspace:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Log in to the ",(0,r.jsx)(n.a,{href:"https://portal.defang.dev",children:"Defang Portal"})]}),"\n",(0,r.jsx)(n.li,{children:"Click the workspace switcher dropdown in the navigation bar"}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Create Workspace"})," at the bottom of the dropdown"]}),"\n",(0,r.jsxs)(n.li,{children:["Enter a name (lowercase kebab-case is recommended, e.g., ",(0,r.jsx)(n.code,{children:"my-team"}),")"]}),"\n",(0,r.jsx)(n.li,{children:"Optionally add teammates and select a billing plan"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Workspace names are unique and can be changed later. While the portal encourages kebab-case naming for compatibility with CLI usage, the name is stored as entered."}),"\n",(0,r.jsx)(n.h2,{id:"using-workspaces-with-the-cli",children:"Using Workspaces with the CLI"}),"\n",(0,r.jsx)(n.h3,{id:"specifying-a-workspace",children:"Specifying a Workspace"}),"\n",(0,r.jsxs)(n.p,{children:["You can specify which workspace to use for any CLI command using the ",(0,r.jsx)(n.code,{children:"--workspace"})," flag:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"defang compose up --workspace=my-team\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Alternatively, set the ",(0,r.jsx)(n.code,{children:"DEFANG_WORKSPACE"})," environment variable:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"export DEFANG_WORKSPACE=my-team\ndefang compose up\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsx)(n.p,{children:"Workspaces can be specified by name or ID. Both work interchangeably."})}),"\n",(0,r.jsx)(n.h3,{id:"listing-workspaces",children:"Listing Workspaces"}),"\n",(0,r.jsx)(n.p,{children:"To see all workspaces you have access to:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"defang workspace ls\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Add ",(0,r.jsx)(n.code,{children:"--verbose"})," to include workspace IDs, or ",(0,r.jsx)(n.code,{children:"--json"})," for JSON output."]}),"\n",(0,r.jsx)(n.h3,{id:"viewing-current-workspace",children:"Viewing Current Workspace"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"defang whoami"})," command shows your current workspace:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"defang whoami\n"})}),"\n",(0,r.jsx)(n.h2,{id:"workspace-membership",children:"Workspace Membership"}),"\n",(0,r.jsx)(n.h3,{id:"defang-managed-workspaces-1",children:"Defang-Managed Workspaces"}),"\n",(0,r.jsx)(n.p,{children:"For workspaces created in the Defang Portal:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["The workspace owner can generate an invite link from the ",(0,r.jsx)(n.strong,{children:"Invites"})," tab"]}),"\n",(0,r.jsx)(n.li,{children:"Share the link with team members"}),"\n",(0,r.jsx)(n.li,{children:"When a user clicks the link, they request access"}),"\n",(0,r.jsx)(n.li,{children:"The owner approves or denies the request from the portal"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Members can have different roles:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Owner"}),": Full control including billing, settings, and member management"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Admin"}),": Can manage members and settings"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Member"}),": Can use the workspace subscription for deployments"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Billing"}),": Can manage payment and subscription details"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"provider-managed-workspaces-1",children:"Provider-Managed Workspaces"}),"\n",(0,r.jsx)(n.p,{children:"For workspaces created from GitHub or GitLab organizations, membership is managed entirely through your Git provider:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Add users to the organization in GitHub/GitLab to grant them workspace access"}),"\n",(0,r.jsx)(n.li,{children:"Remove users from the organization to revoke workspace access"}),"\n",(0,r.jsx)(n.li,{children:"Changes sync automatically when users log in to Defang"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"how-workspaces-relate-to-projects",children:"How Workspaces Relate to Projects"}),"\n",(0,r.jsxs)(n.p,{children:["Workspaces provide access to ",(0,r.jsx)(n.em,{children:"features"})," (deployment capabilities, subscriptions) rather than to specific ",(0,r.jsx)(n.em,{children:"projects"}),". This means:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Any developer with access to both a workspace (with an active subscription) and a codebase can deploy that code"}),"\n",(0,r.jsx)(n.li,{children:"If a developer changes workspaces, they can continue deploying the same project using a different workspace's subscription"}),"\n",(0,r.jsx)(n.li,{children:"The deployment itself lives in the configured cloud account, independent of which workspace was used"}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsx)(n.p,{children:"Deployment logs and history are associated with the workspace used at deployment time. If you deploy a project with Workspace A, then later deploy the same project with Workspace B, the deployment record will be stored under Workspace B."})}),"\n",(0,r.jsx)(n.h2,{id:"cicd-integration",children:"CI/CD Integration"}),"\n",(0,r.jsx)(n.p,{children:"When deploying from GitHub Actions using OIDC authentication, the repository owner automatically becomes the tenant context. This allows CI/CD pipelines to deploy without explicitly specifying a workspace, as long as the repository owner has an active subscription."}),"\n",(0,r.jsxs)(n.p,{children:["For more details, see ",(0,r.jsx)(n.a,{href:"/docs/tutorials/deploying-from-github-actions",children:"Deploying from GitHub Actions"}),"."]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>c});var a=s(96540);const r={},i=a.createContext(r);function o(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);