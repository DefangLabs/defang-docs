"use strict";(self.webpackChunkdefang_docs=self.webpackChunkdefang_docs||[]).push([[4009],{9085:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>d,contentTitle:()=>l,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var t=n(4848),i=n(8453);const r={title:"Adding Custom 1-Click Deploy to Your App",sidebar_position:800,description:"Add a custom 1-Click Deploy link to deploy your own app."},l="Adding Custom 1-Click Deploy to Your App",s={id:"tutorials/adding-custom-one-click-deploy",title:"Adding Custom 1-Click Deploy to Your App",description:"Add a custom 1-Click Deploy link to deploy your own app.",source:"@site/docs/tutorials/adding-custom-one-click-deploy.md",sourceDirName:"tutorials",slug:"/tutorials/adding-custom-one-click-deploy",permalink:"/docs/tutorials/adding-custom-one-click-deploy",draft:!1,unlisted:!1,editUrl:"https://github.com/DefangLabs/defang-docs/tree/main/docs/tutorials/adding-custom-one-click-deploy.md",tags:[],version:"current",sidebarPosition:800,frontMatter:{title:"Adding Custom 1-Click Deploy to Your App",sidebar_position:800,description:"Add a custom 1-Click Deploy link to deploy your own app."},sidebar:"docsSidebar",previous:{title:"Using Codespaces and Gitpod",permalink:"/docs/tutorials/using-codespaces-gitpod"},next:{title:"Providers",permalink:"/docs/category/providers"}},d={},c=[{value:"Pre-requisites",id:"pre-requisites",level:2},{value:"Step 1 - Prepare Your App",id:"step-1---prepare-your-app",level:2},{value:"Step 2 - Copy the GitHub Workflow",id:"step-2---copy-the-github-workflow",level:2},{value:"Step 3 - Get the Encoded URL",id:"step-3---get-the-encoded-url",level:2},{value:"Step 4 - Create the 1-Click Deploy Link",id:"step-4---create-the-1-click-deploy-link",level:2},{value:"Step 5 - Use the Link",id:"step-5---use-the-link",level:2}];function a(e){const o={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.h1,{id:"adding-custom-1-click-deploy-to-your-app",children:"Adding Custom 1-Click Deploy to Your App"}),"\n",(0,t.jsx)(o.p,{children:"This tutorial will show you how to add a 1-Click Deploy link to deploy your app to the Defang Playground."}),"\n",(0,t.jsxs)(o.p,{children:["A 1-Click Deploy link points to a special Defang URL. Clicking this link will trigger a deployment of a project to Defang. The link is often placed as a button in the ",(0,t.jsx)(o.code,{children:"README.md"})," file of your project repository, and is the easiest way to allow anyone to deploy a clone of your app."]}),"\n",(0,t.jsx)(o.admonition,{type:"info",children:(0,t.jsxs)(o.p,{children:["If you are trying to use 1-Click Deploy with one of our ",(0,t.jsx)(o.a,{href:"https://defang.io/samples/",children:"samples"}),", we have a separate tutorial on ",(0,t.jsx)(o.a,{href:"/docs/tutorials/using-one-click-deploy",children:"how to use 1-Click Deploy"}),"."]})}),"\n",(0,t.jsx)(o.h2,{id:"pre-requisites",children:"Pre-requisites"}),"\n",(0,t.jsxs)(o.ul,{children:["\n",(0,t.jsxs)(o.li,{children:["A ",(0,t.jsx)(o.a,{href:"https://github.com/",children:"GitHub"})," repository for your project"]}),"\n"]}),"\n",(0,t.jsx)(o.h2,{id:"step-1---prepare-your-app",children:"Step 1 - Prepare Your App"}),"\n",(0,t.jsxs)(o.p,{children:["You will need a ",(0,t.jsx)(o.code,{children:"compose.yaml"})," file in the root folder of your project repository to describe the services which will be deployed. Learn more about writing ",(0,t.jsx)(o.a,{href:"/docs/concepts/compose#example-of-a-compose-file",children:"Compose files"}),"."]}),"\n",(0,t.jsx)(o.h2,{id:"step-2---copy-the-github-workflow",children:"Step 2 - Copy the GitHub Workflow"}),"\n",(0,t.jsxs)(o.p,{children:["In your project, add a new folder named ",(0,t.jsx)(o.code,{children:".github"}),", then add a folder named ",(0,t.jsx)(o.code,{children:"workflows"})," inside it, and copy the entire GitHub Workflow ",(0,t.jsx)(o.code,{children:"deploy.yaml"})," file from ",(0,t.jsx)(o.a,{href:"https://github.com/DefangLabs/samples/blob/main/starter-sample/.github/workflows/deploy.yaml",children:"here"})," into the ",(0,t.jsx)(o.code,{children:"workflows"})," folder."]}),"\n",(0,t.jsxs)(o.p,{children:["If your app requires ",(0,t.jsx)(o.a,{href:"/docs/concepts/configuration",children:"configuration"})," (e.g. API keys, passwords, etc.), learn more about ",(0,t.jsx)(o.a,{href:"https://github.com/DefangLabs/defang-github-action?tab=readme-ov-file#managing-config-values",children:"managing config variables with the Defang GitHub Action"}),"."]}),"\n",(0,t.jsxs)(o.p,{children:["You should have a ",(0,t.jsx)(o.code,{children:".yaml"})," file similar to the one below:"]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-yaml",children:"name: Deploy\n\non:\n  push:\n    branches:\n      - main\n\njobs:\n  deploy:\n    environment: playground\n    runs-on: ubuntu-latest\n    permissions:\n      contents: read\n      id-token: write\n\n    steps:\n    - name: Checkout Repo\n      uses: actions/checkout@v4\n\n    - name: Deploy\n      uses: DefangLabs/defang-github-action@v1.1.3\n"})}),"\n",(0,t.jsx)(o.h2,{id:"step-3---get-the-encoded-url",children:"Step 3 - Get the Encoded URL"}),"\n",(0,t.jsx)(o.p,{children:"You will need the encoded version of your project repository's URL. This will be used as a redirect for the 1-Click Deploy link."}),"\n",(0,t.jsxs)(o.ol,{children:["\n",(0,t.jsx)(o.li,{children:"Copy the URL of your repository's homepage. It should look something like the following:"}),"\n"]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:"https://github.com/<your-github-username>/<your-repo-name>\n"})}),"\n",(0,t.jsxs)(o.ol,{start:"2",children:["\n",(0,t.jsx)(o.li,{children:"You can go online and paste the URL from the step above into a URL encoder tool of your choice. You should end up with an encoded URL, similar to the one shown below:"}),"\n"]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:"https%3A%2F%2Fgithub.com%2F<your-github-username>%2F<your-repo-name>\n"})}),"\n",(0,t.jsx)(o.h2,{id:"step-4---create-the-1-click-deploy-link",children:"Step 4 - Create the 1-Click Deploy Link"}),"\n",(0,t.jsxs)(o.p,{children:["You will need to create a 1-Click Deploy link with the following format: ",(0,t.jsx)(o.code,{children:"https://portal.defang.dev/redirect?url="})," + your encoded URL. This ensures that the user can get ",(0,t.jsx)(o.a,{href:"/docs/concepts/authentication/",children:"logged in"})," to Defang before they get redirected to clone your app for deployment."]}),"\n",(0,t.jsx)(o.admonition,{type:"tip",children:(0,t.jsxs)(o.p,{children:["Optionally, you can add ",(0,t.jsx)(o.code,{children:"&name=<your-suggested-name>"})," to the end of the link if you'd like to suggest a name for the user to use for their deployment."]})}),"\n",(0,t.jsx)(o.p,{children:"The finished link should look similar to the one below:"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:"https://portal.defang.dev/redirect?url=https%3A%2F%2Fgithub.com%2F<your-github-username>%2F<your-repo-name>&name=<your-suggested-name>\n"})}),"\n",(0,t.jsx)(o.p,{children:"Now you have a link for anyone to deploy your app to Defang, with just 1 click."}),"\n",(0,t.jsx)(o.h2,{id:"step-5---use-the-link",children:"Step 5 - Use the Link"}),"\n",(0,t.jsx)(o.p,{children:"For example, you can add it as a link in a Markdown file:"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:"[1-Click Deploy Link](https://portal.defang.dev/redirect?url=<your-encoded-url>&name=<your-project-here>)\n"})}),"\n",(0,t.jsx)(o.p,{children:"Or perhaps you can add it to a button with your own styling:"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:"[![1-click-deploy-button](https://defang.io/deploy-with-defang.png)](https://portal.defang.dev/redirect?url=<your-encoded-url>&name=<your-project-here>)\n"})})]})}function p(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,o,n)=>{n.d(o,{R:()=>l,x:()=>s});var t=n(6540);const i={},r=t.createContext(i);function l(e){const o=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function s(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(r.Provider,{value:o},e.children)}}}]);