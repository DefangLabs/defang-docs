<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tutorials/migrating-from-heroku" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.1">
<title data-rh="true">Migrating from Heroku | Defang</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.defang.io/img/defang-social-card-2.png"><meta data-rh="true" name="twitter:image" content="https://docs.defang.io/img/defang-social-card-2.png"><meta data-rh="true" property="og:url" content="https://docs.defang.io/docs/tutorials/migrating-from-heroku"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Migrating from Heroku | Defang"><meta data-rh="true" name="description" content="Deploy your Heroku Applications in your own Cloud Account with Defang"><meta data-rh="true" property="og:description" content="Deploy your Heroku Applications in your own Cloud Account with Defang"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.defang.io/docs/tutorials/migrating-from-heroku"><link data-rh="true" rel="alternate" href="https://docs.defang.io/docs/tutorials/migrating-from-heroku" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.defang.io/docs/tutorials/migrating-from-heroku" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://O3VFCOSSZ6-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Tutorials","item":"https://docs.defang.io/docs/category/tutorials"},{"@type":"ListItem","position":2,"name":"Migrating from Heroku","item":"https://docs.defang.io/docs/tutorials/migrating-from-heroku"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Defang RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Defang Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="Defang" href="/opensearch.xml">



<link rel="icon" href="/img/tab_icon.svg">
<script src="/analytics.js"></script><link rel="stylesheet" href="/assets/css/styles.0278f881.css">
<script src="/assets/js/runtime~main.758798f8.js" defer="defer"></script>
<script src="/assets/js/main.777a5f0b.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://defang.io/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/defang-logo.svg" alt="Defang Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/defang-logo.svg" alt="Defang Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Defang Home</b></a><a class="navbar__item navbar__link" href="/docs/Intro">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a class="navbar__item navbar__link navbar__item-get_started" href="/docs/getting-started">Get Started</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts="Meta+k"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="11" cy="11" r="8" stroke="currentColor" fill="none" stroke-width="1.4"></circle><path d="m21 21-4.3-4.3" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/intro"><span title="Overview" class="categoryLinkLabel_W154">Overview</span></a><button aria-label="Expand sidebar category &#x27;Overview&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/getting-started"><span title="Getting Started" class="linkLabel_WmDU">Getting Started</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/docs/category/tutorials"><span title="Tutorials" class="categoryLinkLabel_W154">Tutorials</span></a><button aria-label="Collapse sidebar category &#x27;Tutorials&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/tutorials/deploy-openai-apps"><span title="Deploy OpenAI Apps on Managed LLMs" class="categoryLinkLabel_W154">Deploy OpenAI Apps on Managed LLMs</span></a><button aria-label="Expand sidebar category &#x27;Deploy OpenAI Apps on Managed LLMs&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/adding-custom-one-click-deploy"><span title="Adding Custom 1-Click Deploy to Your App" class="linkLabel_WmDU">Adding Custom 1-Click Deploy to Your App</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/configure-environment-variables"><span title="Configure Environment Variables" class="linkLabel_WmDU">Configure Environment Variables</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/deploy-container-using-the-cli"><span title="Deploy Existing Containers" class="linkLabel_WmDU">Deploy Existing Containers</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/deploy-to-aws"><span title="Deploy to AWS" class="linkLabel_WmDU">Deploy to AWS</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/deploy-to-digitalocean"><span title="Deploy to DigitalOcean" class="linkLabel_WmDU">Deploy to DigitalOcean</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/deploy-to-gcp"><span title="Deploy to GCP" class="linkLabel_WmDU">Deploy to GCP</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/deploy-to-playground"><span title="Deploy to Playground" class="linkLabel_WmDU">Deploy to Playground</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/deploy-to-your-cloud"><span title="Deploy to Your Own Cloud" class="linkLabel_WmDU">Deploy to Your Own Cloud</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/deploy-using-pulumi"><span title="Deploy Using Pulumi" class="linkLabel_WmDU">Deploy Using Pulumi</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/deploy-with-gpu"><span title="Deploy a GPU-Powered Application" class="linkLabel_WmDU">Deploy a GPU-Powered Application</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/deploying-with-the-defang-mcp-server"><span title="Deploying with the Defang MCP Server" class="linkLabel_WmDU">Deploying with the Defang MCP Server</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/estimating-aws-deployment-costs"><span title="Estimating AWS Deployment Costs" class="linkLabel_WmDU">Estimating AWS Deployment Costs</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/estimating-gcp-deployment-costs"><span title="Estimating GCP Deployment Costs" class="linkLabel_WmDU">Estimating GCP Deployment Costs</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/generate-new-code-using-ai"><span title="Generate Project Outlines With AI" class="linkLabel_WmDU">Generate Project Outlines With AI</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/tutorials/migrating-from-heroku"><span title="Migrating from Heroku" class="linkLabel_WmDU">Migrating from Heroku</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/monitoring-your-services"><span title="Monitoring Your Services" class="linkLabel_WmDU">Monitoring Your Services</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/scaling-your-services"><span title="Scaling Your Services" class="linkLabel_WmDU">Scaling Your Services</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/setting_up_your_gcp_account"><span title="Setting Up Your GCP Account" class="linkLabel_WmDU">Setting Up Your GCP Account</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/updating-your-services"><span title="Updating Your Services" class="linkLabel_WmDU">Updating Your Services</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/use-your-own-domain-name"><span title="How to Use Your Own Domain" class="linkLabel_WmDU">How to Use Your Own Domain</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/using-codespaces-gitpod"><span title="Using Codespaces and Gitpod" class="linkLabel_WmDU">Using Codespaces and Gitpod</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/using-one-click-deploy"><span title="Using 1-Click Deploy" class="linkLabel_WmDU">Using 1-Click Deploy</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/category/providers"><span title="Providers" class="categoryLinkLabel_W154">Providers</span></a><button aria-label="Expand sidebar category &#x27;Providers&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/category/cli"><span title="CLI" class="categoryLinkLabel_W154">CLI</span></a><button aria-label="Expand sidebar category &#x27;CLI&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/category/concepts"><span title="Concepts" class="categoryLinkLabel_W154">Concepts</span></a><button aria-label="Expand sidebar category &#x27;Concepts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/category/faq"><span title="FAQ" class="categoryLinkLabel_W154">FAQ</span></a><button aria-label="Expand sidebar category &#x27;FAQ&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/ask"><span title="Ask Defang" class="linkLabel_WmDU">Ask Defang</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item hidden"><a class="menu__link" href="/docs/samples"><span title="Samples" class="linkLabel_WmDU">Samples</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://defang.io/samples" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK"><span title="Samples" class="linkLabel_WmDU">Samples</span><svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/category/tutorials"><span>Tutorials</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Migrating from Heroku</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Migrating from Heroku</h1></header>
<p>This tutorial will guide you through the process of migrating your Heroku applications to your own cloud account with Defang. This will allow you to reduce cost, gain more control, and access to the complete range of available cloud services.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pre-requisites">Pre-requisites<a href="#pre-requisites" class="hash-link" aria-label="Direct link to Pre-requisites" title="Direct link to Pre-requisites" translate="no">​</a></h2>
<ul>
<li><a href="/docs/concepts/authentication">A Defang Account</a></li>
<li><a href="/docs/getting-started#install-the-defang-cli">The Defang CLI</a></li>
<li><a href="https://devcenter.heroku.com/articles/heroku-cli#install-the-heroku-cli" target="_blank" rel="noopener noreferrer">The Heroku CLI (optional, but recommended)</a></li>
<li>Cloud Account Credentials<!-- -->
<ul>
<li><a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-authentication.html" target="_blank" rel="noopener noreferrer">AWS</a></li>
<li><a href="https://cloud.google.com/docs/authentication/set-up-adc-local-dev-environment" target="_blank" rel="noopener noreferrer">GCP</a></li>
</ul>
</li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p><strong>Do I need a Dockerfile?</strong></p><p>No, Defang will use <a href="https://railpack.com/" target="_blank" rel="noopener noreferrer">Railpack</a> to automatically build an OCI container for your application based on the source code and dependencies.</p><p><strong>Do I need a Docker Compose file?</strong></p><p>Defang does require a Docker Compose file to deploy your application, but you don&#x27;t need to write one from scratch. Defang will automatically generate one for your Heroku application.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-1---generating-a-docker-compose-file">Step 1 - Generating a Docker Compose file<a href="#step-1---generating-a-docker-compose-file" class="hash-link" aria-label="Direct link to Step 1 - Generating a Docker Compose file" title="Direct link to Step 1 - Generating a Docker Compose file" translate="no">​</a></h2>
<p>Navigate to your project&#x27;s working directory:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ cd ~/w/vast-badlands</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Gemfile		Procfile	Rakefile	bin		config.ru	lib		public		test		vendor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Gemfile.lock	README.md	app		config		db		log		storage		tmp</span><br></span></code></pre></div></div>
<p>Then run <code>defang init</code> and select <code>Migrate from heroku</code>:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ defang init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? How would you like to start?  [Use arrows to move, type to filter]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Generate with AI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Clone a sample</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; Migrate from Heroku</span><br></span></code></pre></div></div>
<p>A web browser may open, prompting you to login to Defang. Then, if you have the <code>heroku</code> CLI installed, you may be prompted to login with Heroku. Defang will delegate to the <code>heroku</code> CLI to create an authentication token so that it can access information about your deployment. The token <code>defang</code> creates will only be valid for 5 minutes.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p><strong>What if I don&#x27;t have the Heroku CLI installed?</strong>
<code>defang</code> will prompt you for an auth token. You can paste it into the prompt after <a href="https://dashboard.heroku.com/account/applications/authorizations/new" target="_blank" rel="noopener noreferrer">creating one in the Heroku Dashboard</a>.</p></div></div>
<p>At this point, <code>defang</code> will fetch a list of your Heroku applications and prompt you to select the one you would like to migrate.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ defang init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? How would you like to start? Migrate from Heroku</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Ok, let&#x27;s create a compose file for your existing deployment.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * The Heroku CLI is installed, we&#x27;ll use it to generate a short-lived authorization token</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Select the Heroku application to use as a source:  [Use arrows to move, type to filter]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; vast-badlands-staging</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  vast-badlands-production</span><br></span></code></pre></div></div>
<p>Then, <code>defang</code> will request some information about your application from the Heroku API. This information will be used to generate a <code>compose.yaml</code> file which can then be deployed with Defang.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">defang init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? How would you like to start? Migrate from heroku</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Ok, let&#x27;s create a compose file for your existing deployment.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * The Heroku CLI is installed, we&#x27;ll use it to generate a short-lived authorization token</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">? Select the Heroku application to use as a source: vast-badlands-production</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Collecting information about &quot;vast-badlands-production&quot;...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Generating compose file...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Compose file written to compose.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Check the files in your favorite editor.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">To deploy this project, run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  defang compose up</span><br></span></code></pre></div></div>
<p>At this point, <code>defang</code> will have generated a <code>compose.yaml</code> file that describes your application and its services. You can review this file in your favorite text editor.</p>
<p>The application I used had a single <code>web</code> dyno:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ heroku ps -a vast-badlands-production</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=== web (Eco): bin/rails server -p ${PORT:-5000} -e $RAILS_ENV (1)</span><br></span></code></pre></div></div>
<p>And a single PostgreSQL database:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">heroku addons -a vast-badlands-production</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Add-on                                     Plan        Price        Max price State</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ────────────────────────────────────────── ─────────── ──────────── ───────── ───────</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> heroku-postgresql (postgresql-rosy-12345) essential-0 ~$0.007/hour $5/month  created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  └─ as DATABASE</span><br></span></code></pre></div></div>
<p>The <code>compose.yaml</code> file that <code>defang</code> generated looks like this:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">postgres</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> postgres</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">17.4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">POSTGRES_DB</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> eb631mzx93pn27</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">POSTGRES_USER</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> postgres</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">POSTGRES_PASSWORD</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">healthcheck</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">test</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;CMD-SHELL&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;pg_isready -U $POSTGRES_USER&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">x-defang-postgres</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">web</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">context</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> bin/rails server </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">p $PORT </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">e $RAILS_ENV</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;5000:5000&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">DATABASE_URL</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> postgres</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//$POSTGRES_USER</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">$POSTGRES_PASSWORD@postgres</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">5432/$POSTGRES_DB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">LANG</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> en_US.UTF</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">RACK_ENV</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> production</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">RAILS_ENV</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> production</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">RAILS_LOG_TO_STDOUT</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> enabled</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">RAILS_SERVE_STATIC_FILES</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> enabled</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">SECRET_KEY_BASE</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">PORT</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">POSTGRES_PASSWORD</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $POSTGRES_PASSWORD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">depends_on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">postgres</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">condition</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> service_healthy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">deploy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">cpus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;1&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 512M</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">release</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">context</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> bin/rails db</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">migrate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">DATABASE_URL</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> postgres</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//$POSTGRES_USER</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">$POSTGRES_PASSWORD@postgres</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">5432/$POSTGRES_DB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">RAILS_ENV</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> production</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">SECRET_KEY_BASE</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">depends_on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">postgres</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">condition</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> service_healthy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">deploy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">cpus</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;1&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">memory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 512M</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">restart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;no&quot;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-2---deploying-to-your-cloud-account">Step 2 - Deploying to your cloud account<a href="#step-2---deploying-to-your-cloud-account" class="hash-link" aria-label="Direct link to Step 2 - Deploying to your cloud account" title="Direct link to Step 2 - Deploying to your cloud account" translate="no">​</a></h2>
<p>Now all you need to do is deploy your application to the cloud.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deploying-to-aws">Deploying to AWS<a href="#deploying-to-aws" class="hash-link" aria-label="Direct link to Deploying to AWS" title="Direct link to Deploying to AWS" translate="no">​</a></h3>
<p>If you&#x27;re deploying to AWS, you&#x27;ll need to invoke <code>defang compose up --provider aws</code> with your AWS access credentials in the environment:</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Run the following command</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">AWS_REGION=us-west-2 AWS_PROFILE=default defang compose up --provider aws</span><br></span></code></pre></div></div></summary><div><div class="collapsibleContent_i85q"><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> * Using Defang Playground provider from stored preference</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ! Defang cannot monitor status of the following managed service(s): [postgres].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   To check if the managed service is up, check the status of the service which depends on it.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Packaging the project files for release at /Users/defang/w/vast-badlands</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Uploading the project files for release</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Packaging the project files for web at /Users/defang/w/vast-badlands</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Uploading the project files for web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Monitor your services&#x27; status in the defang portal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - https://portal.defang.io/service/postgres</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - https://portal.defang.io/service/release</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   - https://portal.defang.io/service/web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Tailing logs for deployment ID qhjwfbi6p1re ; press Ctrl+C to detach:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:46:14.632-07:00 cd Update started for stack defang-prod1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:46:17.801-07:00 cd  ** Updating service &quot;postgres&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:46:17.869-07:00 cd  ** Building image for &quot;release&quot;...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:46:17.931-07:00 cd  ** Building image for &quot;web&quot;...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:46:17.946-07:00 cd  ** Updating service &quot;web&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:46:20.003-07:00 cd  ** Updated service &quot;postgres&quot; to revision 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:00.757-07:00 postgres The files belonging to this database system will be owned by user &quot;postgres&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:00.757-07:00 postgres This user must also own the server process.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:00.758-07:00 postgres The database cluster will be initialized with locale &quot;en_US.utf8&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:00.758-07:00 postgres The default database encoding has accordingly been set to &quot;UTF8&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:00.758-07:00 postgres The default text search configuration will be set to &quot;english&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:00.758-07:00 postgres Data page checksums are disabled.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:00.758-07:00 postgres fixing permissions on existing directory /var/lib/postgresql/data ... ok</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:00.758-07:00 postgres creating subdirectories ... ok</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:00.758-07:00 postgres selecting dynamic shared memory implementation ... posix</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:00.829-07:00 postgres selecting default &quot;max_connections&quot; ... 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:00.924-07:00 postgres selecting default &quot;shared_buffers&quot; ... 128MB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:00.940-07:00 postgres selecting default time zone ... Etc/UTC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:00.941-07:00 postgres creating configuration files ... ok</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:01.723-07:00 postgres running bootstrap script ... ok</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:03.232-07:00 postgres performing post-bootstrap initialization ... ok</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:03.368-07:00 postgres initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next time you run initdb.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:03.368-07:00 postgres syncing data to disk ... ok</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:03.368-07:00 postgres Success. You can now start the database server using:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:03.368-07:00 postgres     pg_ctl -D /var/lib/postgresql/data -l logfile start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:03.530-07:00 postgres waiting for server to start....2025-08-28 21:47:03.530 UTC [48] LOG:  starting PostgreSQL 17.4 (Debian 17.4-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:03.533-07:00 postgres 2025-08-28 21:47:03.533 UTC [48] LOG:  listening on Unix socket &quot;/var/run/postgresql/.s.PGSQL.5432&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:03.544-07:00 postgres 2025-08-28 21:47:03.544 UTC [51] LOG:  database system was shut down at 2025-08-28 21:47:03 UTC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:03.550-07:00 postgres 2025-08-28 21:47:03.550 UTC [48] LOG:  database system is ready to accept connections</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:03.639-07:00 postgres  done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:03.639-07:00 postgres server started</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:04.033-07:00 postgres CREATE DATABASE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:04.034-07:00 postgres /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:04.035-07:00 postgres waiting for server to shut down....2025-08-28 21:47:04.035 UTC [48] LOG:  received fast shutdown request</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:04.039-07:00 postgres 2025-08-28 21:47:04.039 UTC [48] LOG:  aborting any active transactions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:04.040-07:00 postgres 2025-08-28 21:47:04.040 UTC [48] LOG:  background worker &quot;logical replication launcher&quot; (PID 54) exited with exit code 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:04.043-07:00 postgres 2025-08-28 21:47:04.042 UTC [49] LOG:  shutting down</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:04.045-07:00 postgres 2025-08-28 21:47:04.045 UTC [49] LOG:  checkpoint starting: shutdown immediate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:04.158-07:00 postgres 2025-08-28 21:47:04.158 UTC [49] LOG:  checkpoint complete: wrote 921 buffers (5.6%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.097 s, sync=0.008 s, total=0.116 s; sync files=301, longest=0.003 s, average=0.001 s; distance=4238 kB, estimate=4238 kB; lsn=0/1908990, redo lsn=0/1908990</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:04.164-07:00 postgres 2025-08-28 21:47:04.164 UTC [48] LOG:  database system is shut down</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:03.368-07:00 postgres initdb: warning: enabling &quot;trust&quot; authentication for local connections</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:04.235-07:00 postgres  done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:04.235-07:00 postgres server stopped</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:04.238-07:00 postgres PostgreSQL init process complete; ready for start up.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:04.269-07:00 postgres 2025-08-28 21:47:04.269 UTC [1] LOG:  starting PostgreSQL 17.4 (Debian 17.4-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:04.323-07:00 postgres 2025-08-28 21:47:04.323 UTC [1] LOG:  listening on IPv4 address &quot;0.0.0.0&quot;, port 5432</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:04.324-07:00 postgres 2025-08-28 21:47:04.323 UTC [1] LOG:  listening on IPv6 address &quot;::&quot;, port 5432</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:04.329-07:00 postgres 2025-08-28 21:47:04.329 UTC [1] LOG:  listening on Unix socket &quot;/var/run/postgresql/.s.PGSQL.5432&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:04.338-07:00 postgres 2025-08-28 21:47:04.338 UTC [64] LOG:  database system was shut down at 2025-08-28 21:47:04 UTC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:47:04.345-07:00 postgres 2025-08-28 21:47:04.345 UTC [1] LOG:  database system is ready to accept connections</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:51:54.551-07:00 cd  ** Build succeeded for &quot;web&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:51:56.626-07:00 cd  ** Build succeeded for &quot;release&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:52:04.407-07:00 postgres 2025-08-28 21:52:04.407 UTC [62] LOG:  checkpoint starting: time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:52:06.028-07:00 postgres 2025-08-28 21:52:06.027 UTC [62] LOG:  checkpoint complete: wrote 19 buffers (0.1%); 0 WAL file(s) added, 0 removed, 0 recycled; write=1.609 s, sync=0.004 s, total=1.621 s; sync files=11, longest=0.003 s, average=0.001 s; distance=28 kB, estimate=28 kB; lsn=0/190FA40, redo lsn=0/190F9E8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:52:32.418-07:00 release I, [2025-08-28T21:52:32.392682 #1]  INFO -- : Migrating to CreateMembers (20240416182733)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:52:32.418-07:00 release == 20240416182733 CreateMembers: migrating ====================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:52:32.418-07:00 release -- create_table(:members)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:52:32.418-07:00 release    -&gt; 0.0029s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:52:32.418-07:00 release == 20240416182733 CreateMembers: migrated (0.0030s) ===========================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:52:32.418-07:00 release I, [2025-08-28T21:52:32.400192 #1]  INFO -- : Migrating to DeviseCreateUsers (20240417165503)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:52:32.418-07:00 release == 20240417165503 DeviseCreateUsers: migrating ================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:52:32.418-07:00 release -- create_table(:users)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:52:32.418-07:00 release    -&gt; 0.0039s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:52:32.418-07:00 release -- add_index(:users, :email, {:unique=&gt;true})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:52:32.418-07:00 release    -&gt; 0.0013s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:52:32.418-07:00 release -- add_index(:users, :reset_password_token, {:unique=&gt;true})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:52:32.418-07:00 release    -&gt; 0.0008s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:52:32.418-07:00 release == 20240417165503 DeviseCreateUsers: migrated (0.0062s) =======================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:52:32.418-07:00 release I, [2025-08-28T21:52:32.409275 #1]  INFO -- : Migrating to AddUserIdToMembers (20240417202202)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:52:32.418-07:00 release == 20240417202202 AddUserIdToMembers: migrating ===============================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:52:32.418-07:00 release -- add_column(:members, :user_id, :integer)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:52:32.418-07:00 release    -&gt; 0.0012s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:52:32.418-07:00 release -- add_index(:members, :user_id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:52:32.418-07:00 release    -&gt; 0.0009s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:52:32.418-07:00 release == 20240417202202 AddUserIdToMembers: migrated (0.0022s) ======================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:52:45.061-07:00 cd  ** Updated service &quot;web&quot; to revision 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:52:49.353-07:00 cd Update succeeded in 6m34.758057781s ; provisioning...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:53:32.118-07:00 web =&gt; Booting Puma</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:53:32.119-07:00 web =&gt; Rails 7.1.3.2 application starting in production</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:53:32.119-07:00 web =&gt; Run `bin/rails server --help` for more startup options</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:53:34.228-07:00 web Puma starting in single mode...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:53:34.228-07:00 web * Puma version: 6.4.2 (ruby 3.3.4-p94) (&quot;The Eagle of Durango&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:53:34.228-07:00 web *  Min threads: 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:53:34.228-07:00 web *  Max threads: 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:53:34.228-07:00 web *  Environment: production</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:53:34.228-07:00 web *          PID: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:53:34.230-07:00 web * Listening on http://0.0.0.0:5000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-08-28T14:53:34.232-07:00 web Use Ctrl-C to stop</span><br></span></code></pre></div></div></div></div></details>
<p>See our full tutorial on <a href="/docs/tutorials/deploy-to-aws">deploying to AWS</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deploying-to-gcp">Deploying to GCP<a href="#deploying-to-gcp" class="hash-link" aria-label="Direct link to Deploying to GCP" title="Direct link to Deploying to GCP" translate="no">​</a></h3>
<p>If you&#x27;re deploying to GCP, you&#x27;ll need to invoke <code>defang compose up --provider gcp</code> with your GCP access credentials in the environment:</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>Run the following command</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GCP_PROJECT_ID=my-project-123456 defang compose up --provider gcp</span><br></span></code></pre></div></div></summary><div><div class="collapsibleContent_i85q"><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> * Using Google Cloud Platform provider from command line flag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ! Defang cannot monitor status of the following managed service(s): [postgres release].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   To check if the managed service is up, check the status of the service which depends on it.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ! service &quot;postgres&quot;: missing memory reservation; using provider-specific defaults. Specify deploy.resources.reservations.memory to avoid out-of-memory errors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ! service &quot;web&quot;: ingress port without healthcheck defaults to GET / HTTP/1.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Packaging the project files for web at /Users/defang/wk/vast-badlands</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Uploading the project files for web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Setting up defang CD in GCP project my-project-123456, this could take a few minutes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Packaging the project files for release at /Users/defang/wk/vast-badlands</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Uploading the project files for release</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Tailing logs for deployment ID fgdh4ct0hopz ; press Ctrl+C to detach:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Showing only build logs and runtime errors. Press V to toggle verbose mode.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:28:08.634-04:00 cd  ** Update started for stack beta</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:28:17.990-04:00 cd  ** Updating service &quot;postgres&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:28:44.773-04:00 cd  ** Building image for &quot;release&quot;...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:28:58.012-04:00 cd  ** Building image for &quot;web&quot;...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:47:02.479-04:00 release I, [2025-09-08T14:47:02.409371 #1]  INFO -- : Migrating to CreateMembers (20240416182733)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:47:02.479-04:00 release == 20240416182733 CreateMembers: migrating ====================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:47:02.479-04:00 release -- create_table(:members)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:47:02.479-04:00 release    -&gt; 0.0073s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:47:02.479-04:00 release == 20240416182733 CreateMembers: migrated (0.0073s) ===========================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:47:02.479-04:00 release I, [2025-09-08T14:47:02.432075 #1]  INFO -- : Migrating to DeviseCreateUsers (20240417165503)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:47:02.479-04:00 release == 20240417165503 DeviseCreateUsers: migrating ================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:47:02.479-04:00 release -- create_table(:users)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:47:02.479-04:00 release    -&gt; 0.0080s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:47:02.479-04:00 release -- add_index(:users, :email, {:unique=&gt;true})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:47:02.479-04:00 release    -&gt; 0.0022s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:47:02.479-04:00 release -- add_index(:users, :reset_password_token, {:unique=&gt;true})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:47:02.479-04:00 release    -&gt; 0.0021s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:47:02.479-04:00 release == 20240417165503 DeviseCreateUsers: migrated (0.0124s) =======================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:47:02.479-04:00 release I, [2025-09-08T14:47:02.458370 #1]  INFO -- : Migrating to AddUserIdToMembers (20240417202202)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:47:02.479-04:00 release == 20240417202202 AddUserIdToMembers: migrating ===============================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:47:02.479-04:00 release -- add_column(:members, :user_id, :integer)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:47:02.479-04:00 release    -&gt; 0.0044s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:47:02.479-04:00 release -- add_index(:members, :user_id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:47:02.479-04:00 release    -&gt; 0.0019s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:47:02.479-04:00 release == 20240417202202 AddUserIdToMembers: migrated (0.0064s) ======================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:48:16.157-04:00 web =&gt; Booting Puma</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:48:16.157-04:00 web =&gt; Rails 7.1.3.2 application starting in production</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:48:16.157-04:00 web =&gt; Run `bin/rails server --help` for more startup options</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:48:18.625-04:00 web [1] Puma starting in cluster mode...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:48:18.625-04:00 web [1] * Puma version: 6.4.2 (ruby 3.3.4-p94) (&quot;The Eagle of Durango&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:48:18.625-04:00 web [1] *  Min threads: 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:48:18.625-04:00 web [1] *  Max threads: 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:48:18.625-04:00 web [1] *  Environment: production</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:48:18.626-04:00 web [1] *   Master PID: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:48:18.626-04:00 web [1] *      Workers: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:48:18.626-04:00 web [1] *     Restarts: (✔) hot (✔) phased</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:48:18.626-04:00 web [1] * Listening on http://0.0.0.0:5000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2025-09-08T10:48:18.627-04:00 web [1] Use Ctrl-C to stop</span><br></span></code></pre></div></div></div></div></details>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deploying-to-digitalocean">Deploying to DigitalOcean<a href="#deploying-to-digitalocean" class="hash-link" aria-label="Direct link to Deploying to DigitalOcean" title="Direct link to Deploying to DigitalOcean" translate="no">​</a></h3>
<p>If you&#x27;re deploying to GCP, you&#x27;ll need to invoke <code>defang compose up --provider digitalocean</code> with your DigitalOcean access credentials in the environment:</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Some Heroku applications may require some manual adjustments to be deployed to DigitalOcean with Defang.
Dockerfiles are required for deployments to DigitalOcean, so you may need to create one if your application does not already have one. Support for automatic Dockerfile generation is coming soon with <a href="/docs/concepts/railpack">Railpack</a>.
Defang also does not yet support <a href="/docs/concepts/one_off_jobs">one-off jobs</a> on DigitalOcean, so you will need to modify your services to run these tasks during initialization.</p></div></div>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export DIGITALOCEAN_TOKEN=your_digitalocean_token</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export SPACES_ACCESS_KEY_ID=your_spaces_access_key_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export SPACES_SECRET_ACCESS_KEY=your_spaces_secret_access_key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ defang compose up --provider digitalocean</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-3---migrating-your-data">Step 3 - Migrating your data<a href="#step-3---migrating-your-data" class="hash-link" aria-label="Direct link to Step 3 - Migrating your data" title="Direct link to Step 3 - Migrating your data" translate="no">​</a></h2>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>If you need help with your migration, please reach out to our support team on <a href="https://s.defang.io/discord" target="_blank" rel="noopener noreferrer">Discord</a>.</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/DefangLabs/defang-docs/tree/main/docs/tutorials/migrating-from-heroku.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/tutorials/generate-new-code-using-ai"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Generate Project Outlines With AI</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/tutorials/monitoring-your-services"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Monitoring Your Services</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#pre-requisites" class="table-of-contents__link toc-highlight">Pre-requisites</a></li><li><a href="#step-1---generating-a-docker-compose-file" class="table-of-contents__link toc-highlight">Step 1 - Generating a Docker Compose file</a></li><li><a href="#step-2---deploying-to-your-cloud-account" class="table-of-contents__link toc-highlight">Step 2 - Deploying to your cloud account</a><ul><li><a href="#deploying-to-aws" class="table-of-contents__link toc-highlight">Deploying to AWS</a></li><li><a href="#deploying-to-gcp" class="table-of-contents__link toc-highlight">Deploying to GCP</a></li><li><a href="#deploying-to-digitalocean" class="table-of-contents__link toc-highlight">Deploying to DigitalOcean</a></li></ul></li><li><a href="#step-3---migrating-your-data" class="table-of-contents__link toc-highlight">Step 3 - Migrating your data</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Sections</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/category/tutorials">Tutorials</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/category/providers">Providers</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/category/cli">CLI Reference</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/category/concepts">Concepts</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/ask">Ask Defang</a></li><li class="footer__item"><a href="https://defang.io/samples" target="_blank" rel="noopener noreferrer" class="footer__link-item">Samples<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/DefangLabs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://s.defang.io/discord" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://twitter.com/DefangLabs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/defang/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/@DefangLabs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div></div></footer></div>
</body>
</html>