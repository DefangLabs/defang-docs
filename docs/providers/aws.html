<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-providers/aws/aws" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.1">
<title data-rh="true">AWS | Defang</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.defang.io/img/defang-social-card-2.png"><meta data-rh="true" name="twitter:image" content="https://docs.defang.io/img/defang-social-card-2.png"><meta data-rh="true" property="og:url" content="https://docs.defang.io/docs/providers/aws"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="AWS | Defang"><meta data-rh="true" name="description" content="Defang allows you to easily create and manage full, scalable applications with AWS."><meta data-rh="true" property="og:description" content="Defang allows you to easily create and manage full, scalable applications with AWS."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.defang.io/docs/providers/aws"><link data-rh="true" rel="alternate" href="https://docs.defang.io/docs/providers/aws" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.defang.io/docs/providers/aws" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://O3VFCOSSZ6-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Providers","item":"https://docs.defang.io/docs/category/providers"},{"@type":"ListItem","position":2,"name":"AWS","item":"https://docs.defang.io/docs/providers/aws/"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Defang RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Defang Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="Defang" href="/opensearch.xml">



<link rel="icon" href="/img/tab_icon.svg">
<script src="/analytics.js"></script><link rel="stylesheet" href="/assets/css/styles.1e10c9f7.css">
<script src="/assets/js/runtime~main.aa5a0116.js" defer="defer"></script>
<script src="/assets/js/main.bf88543d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://defang.io/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/defang-logo.svg" alt="Defang Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/defang-logo.svg" alt="Defang Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Defang Home</b></a><a class="navbar__item navbar__link" href="/docs/Intro">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a class="navbar__item navbar__link navbar__item-get_started" href="/docs/getting-started">Get Started</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts="Meta+k"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="11" cy="11" r="8" stroke="currentColor" fill="none" stroke-width="1.4"></circle><path d="m21 21-4.3-4.3" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/intro"><span title="Overview" class="categoryLinkLabel_W154">Overview</span></a><button aria-label="Expand sidebar category &#x27;Overview&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/getting-started"><span title="Getting Started" class="linkLabel_WmDU">Getting Started</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/category/tutorials"><span title="Tutorials" class="categoryLinkLabel_W154">Tutorials</span></a><button aria-label="Expand sidebar category &#x27;Tutorials&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/docs/category/providers"><span title="Providers" class="categoryLinkLabel_W154">Providers</span></a><button aria-label="Collapse sidebar category &#x27;Providers&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/providers/playground"><span title="Playground" class="linkLabel_WmDU">Playground</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/providers/aws"><span title="AWS" class="linkLabel_WmDU">AWS</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/providers/digitalocean"><span title="DigitalOcean" class="linkLabel_WmDU">DigitalOcean</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/providers/gcp"><span title="GCP" class="linkLabel_WmDU">GCP</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/providers/azure"><span title="Azure" class="linkLabel_WmDU">Azure</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/category/cli"><span title="CLI" class="categoryLinkLabel_W154">CLI</span></a><button aria-label="Expand sidebar category &#x27;CLI&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/category/concepts"><span title="Concepts" class="categoryLinkLabel_W154">Concepts</span></a><button aria-label="Expand sidebar category &#x27;Concepts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/category/faq"><span title="FAQ" class="categoryLinkLabel_W154">FAQ</span></a><button aria-label="Expand sidebar category &#x27;FAQ&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/ask"><span title="Ask Defang" class="linkLabel_WmDU">Ask Defang</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item hidden"><a class="menu__link" href="/docs/samples"><span title="Samples" class="linkLabel_WmDU">Samples</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://defang.io/samples" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK"><span title="Samples" class="linkLabel_WmDU">Samples</span><svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/category/providers"><span>Providers</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">AWS</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Amazon Web Services (AWS)</h1></header>
<p>Why should you use Defang with AWS? Defang allows you to easily create and manage full, scalable applications with AWS. Defang aims to make it easier to deploy your services to the cloud. Don&#x27;t waste your time learning the ins and outs of AWS, deciding which of the 200+ services to use, and then writing the infrastructure code to deploy your services, and making sure they are properly secured. Defang does all of that for you.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>AWS Free Tier &amp; Credits</div><div class="admonitionContent_BuS1"><p>You can use the AWS Free Tier to try out Defang. Learn more about it <a href="https://aws.amazon.com/free/?all-free-tier.sort-by=item.additionalFields.SortRank&amp;all-free-tier.sort-order=asc&amp;awsf.Free%20Tier%20Types=*all&amp;awsf.Free%20Tier%20Categories=*all" target="_blank" rel="noopener noreferrer">here</a>. If you&#x27;re an eligible startup, you can sign up for credits <a href="https://aws.amazon.com/startups/sign-up?referrer_url_path=%2Fstartups" target="_blank" rel="noopener noreferrer">here</a>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-started">Getting Started<a href="#getting-started" class="hash-link" aria-label="Direct link to Getting Started" title="Direct link to Getting Started" translate="no">​</a></h2>
<p>Getting started with the Defang BYOC AWS Provider is easy. The first step is to <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html" target="_blank" rel="noopener noreferrer">authenticate your shell</a> with AWS as an admin user. The authenticated user should be an IAM admin because Defang will need permission to create resources and IAM roles in your account.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>If you have the AWS CLI installed, you should be able to successfully run <code>aws sts get-caller-identity</code> and see your account ID.</p></div></div>
<p>Use the <code>--provider=aws</code> flag to tell the Defang CLI to use the AWS Provider or set the <code>DEFANG_PROVIDER</code> environment variable to <code>aws</code>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ defang compose up --provider=aws</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ export DEFANG_PROVIDER=aws</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Because Defang creates roles, you need to have the appropriate permissions to create roles in your cloud provider account, typically the <code>AdministratorAccess</code> policy in AWS.</p></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>The Defang CLI does not depend on the AWS CLI. It uses the <a href="https://aws.amazon.com/sdk-for-go/" target="_blank" rel="noopener noreferrer">AWS SDK for Go</a> to interact with your AWS account. In most cases, if you can run the <code>aws sts get-caller-identity</code> from the tip above, you should be good to go. However, due to a difference between the AWS CLI and the AWS SDK for Go, there is at least one case where they behave differently: if you are using <code>aws sso login</code> and have clashing profiles in your <code>.aws/config</code> and <code>.aws/credentials</code> files, the AWS CLI will prioritize SSO profiles and caches over regular profiles, but the AWS SDK for Go will prioritize the credentials file, and it may fail.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="region">Region<a href="#region" class="hash-link" aria-label="Direct link to Region" title="Direct link to Region" translate="no">​</a></h2>
<p>The Defang BYOC AWS Provider will use the region specified in the <code>AWS_REGION</code> environment variable, or a profile in the <code>~/.aws/config</code> file exactly as the AWS CLI would.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="architecture">Architecture<a href="#architecture" class="hash-link" aria-label="Direct link to Architecture" title="Direct link to Architecture" translate="no">​</a></h2>
<p>Defang uses resources that are native to the cloud provider you are using. The following describes the current state of Defang&#x27;s support for AWS, the specific resources that Defang uses, and the roadmap for future support.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="secrets">Secrets<a href="#secrets" class="hash-link" aria-label="Direct link to Secrets" title="Direct link to Secrets" translate="no">​</a></h3>
<p>Defang allows you to configure your services with sensitive config values. Sensitive values are stored in AWS Systems Manager Parameter Store, and are encrypted.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deployment">Deployment<a href="#deployment" class="hash-link" aria-label="Direct link to Deployment" title="Direct link to Deployment" translate="no">​</a></h3>
<p>To deploy your services, the Defang CLI packages your code and uploads it to an S3 bucket in your account. The CLI then deploys an ECS task that uses Pulumi to build your container image and run your service.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="runtime">Runtime<a href="#runtime" class="hash-link" aria-label="Direct link to Runtime" title="Direct link to Runtime" translate="no">​</a></h3>
<p>The provider runs your workloads using ECS using Fargate. It provisions a VPC with public and private subnets, and deploys your services to the private subnets. It then provisions an Application Load Balancer (ALB) and routes traffic to your services.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="service-discovery">Service Discovery<a href="#service-discovery" class="hash-link" aria-label="Direct link to Service Discovery" title="Direct link to Service Discovery" translate="no">​</a></h3>
<p>Defang uses a Route53 private hosted zone for service discovery. Each (private) service in the Compose file will get a CNAME or A record which resolves to the service&#x27;s AWS domain name or IP, respectively. To update the A records for the dynamically assigned IP addresses, Defang will add a <a href="https://github.com/DefangLabs/route53-sidecar" target="_blank" rel="noopener noreferrer">Route53 sidecar</a> alongside your container.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="managed-storage">Managed Storage<a href="#managed-storage" class="hash-link" aria-label="Direct link to Managed Storage" title="Direct link to Managed Storage" translate="no">​</a></h2>
<p>Defang can help you provision <a href="/docs/concepts/managed-storage">managed storage</a> services. The following managed storage services are supported on AWS:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="managed-postgres">Managed Postgres<a href="#managed-postgres" class="hash-link" aria-label="Direct link to Managed Postgres" title="Direct link to Managed Postgres" translate="no">​</a></h3>
<p>When using <a href="/docs/concepts/managed-storage/managed-postgres">Managed Postgres</a>, the Defang CLI provisions an RDS Postgres instance in your account.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="managed-redis">Managed Redis<a href="#managed-redis" class="hash-link" aria-label="Direct link to Managed Redis" title="Direct link to Managed Redis" translate="no">​</a></h3>
<p>When using <a href="/docs/concepts/managed-storage/managed-redis">Managed Redis</a>, the Defang CLI provisions an ElastiCache Redis cluster in your account.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="managed-llms">Managed LLMs<a href="#managed-llms" class="hash-link" aria-label="Direct link to Managed LLMs" title="Direct link to Managed LLMs" translate="no">​</a></h3>
<p>Defang offers integration with managed, cloud-native large language model services with the <code>x-defang-llm</code> service extension. Add this extension to any services which use the Bedrock SDKs.</p>
<p>When using <a href="/docs/concepts/managed-llms/managed-language-models">Managed LLMs</a>, the Defang CLI provisions an ElastiCache Redis cluster in your account.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="managed-mongodb">Managed MongoDB<a href="#managed-mongodb" class="hash-link" aria-label="Direct link to Managed MongoDB" title="Direct link to Managed MongoDB" translate="no">​</a></h3>
<p>Defang will provision a DocumentDB instance for services that use the <code>x-defang-mongodb</code> service extension. This allows you to use MongoDB as a managed service, rather than running it as a container.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="managed-resources">Managed Resources<a href="#managed-resources" class="hash-link" aria-label="Direct link to Managed Resources" title="Direct link to Managed Resources" translate="no">​</a></h3>
<p>Defang will create and manage the following resources in your AWS account from its bootstrap CloudFormation template:</p>
<table><thead><tr><th>Resource Type</th><th>Example Resource Name</th></tr></thead><tbody><tr><td>s3/Bucket</td><td>defang-cd-bucket-cbpbzz8hzm7</td></tr><tr><td>ecs/ClusterCapacityProviderAssociations</td><td>defang-cd-Cluster-pqFhjwuklvm</td></tr><tr><td>ecs/Cluster</td><td>defang-cd-ClusterpJqFhjwuklvm</td></tr><tr><td>iam/Role</td><td>defang-cd-ExeutionRole-XE7RbQDfeEwx</td></tr><tr><td>ec2/InternetGateway</td><td>igw-05bd7adc92541ec3</td></tr><tr><td>ec2/VPCGatewayAttachment</td><td>IGW</td></tr><tr><td>logs/LogGroup</td><td>defang-cd-Logroup-6LSZet3tFnEy</td></tr><tr><td>ecr/PullThroughCacheRule</td><td>defang-cd-ecrpublic</td></tr><tr><td>ec2/Route</td><td>rtb-08f3f5afc9e6c8c8</td></tr><tr><td>ec2/RouteTable</td><td>rtb-08f3f5ffc9e6c8c8</td></tr><tr><td>ec2/VPCEndpoint</td><td>vpce-02175d8d4f47d0c9</td></tr><tr><td>ec2/SecurityGroup</td><td>sg-032b839c63e70e49</td></tr><tr><td>ec2/Subnet</td><td>subnet-086bead399ddc8a0</td></tr><tr><td>ec2/SubnetRouteTableAssociation</td><td>rtbassoc-02e200d45e7227fe</td></tr><tr><td>ecs/TaskDefinition</td><td>arn:aws:ecsus-west-2:381492210770<!-- -->:task-definition<!-- -->/defang-cd-TaskDefinition-RXd5tf9TaN38:1</td></tr><tr><td>iam/Role</td><td>defang-cd-askRole-gsEeDPd6sPQY</td></tr><tr><td>ec2/VPC</td><td>vpc-0cbca64f13435695</td></tr></tbody></table>
<p>Then, for each project you deploy, Defang will create and manage the following resources:</p>
<table><thead><tr><th>Resource Type</th><th>Example Resource Name</th></tr></thead><tbody><tr><td>ecr/Repository</td><td>project1/kaniko-build</td></tr><tr><td>ecr/LifecyclePolicy</td><td>project1/kaniko-build</td></tr><tr><td>acm/Certificate</td><td>*.project1.tenant1.defang.app</td></tr><tr><td>ecr/Repository</td><td>project1/kaniko-build/cache</td></tr><tr><td>ecr/LifecyclePolicy</td><td>project1/kaniko-build/cache</td></tr><tr><td>iam/InstanceProfile</td><td>ecs-agent-profile</td></tr><tr><td>iam/Role</td><td>ecs-task-execution-role</td></tr><tr><td>cloudwatch/EventRule</td><td>project1-ecs-lifecycle-rule</td></tr><tr><td>cloudwatch/EventTarget</td><td>project1-ecs-event-cw-target</td></tr><tr><td>route53/Record</td><td>validation-project1.tenant1.defang.app</td></tr><tr><td>acm/CertificateValidation</td><td>*.project1.tenant1.defang.appValidation</td></tr><tr><td>ec2/VpcDhcpOptionsAssociation</td><td>dhcp-options-association</td></tr><tr><td>cloudwatch/LogGroup</td><td>builds</td></tr><tr><td>iam/Role</td><td>kaniko-task-role</td></tr><tr><td>ecs/TaskDefinition</td><td>kanikoTaskDefArm64</td></tr><tr><td>ecs/TaskDefinition</td><td>kanikoTaskDefAmd64</td></tr><tr><td>s3/Bucket</td><td>defang-build</td></tr><tr><td>s3/BucketPublicAccessBlock</td><td>defang-build-block</td></tr><tr><td>ecs/Cluster</td><td>cluster</td></tr><tr><td>ecs/ClusterCapacityProviders</td><td>cluster-capacity-providers</td></tr><tr><td>ec2/SecurityGroup</td><td>project1_app-sg</td></tr><tr><td>ec2/SecurityGroup</td><td>bootstrap</td></tr><tr><td>ec2/VpcDhcpOptions</td><td>dhcp-options</td></tr><tr><td>cloudwatch/LogGroup</td><td>logs</td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/DefangLabs/defang-docs/tree/main/docs/providers/aws/aws.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/providers/playground"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Playground</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/providers/digitalocean"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">DigitalOcean</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#getting-started" class="table-of-contents__link toc-highlight">Getting Started</a></li><li><a href="#region" class="table-of-contents__link toc-highlight">Region</a></li><li><a href="#architecture" class="table-of-contents__link toc-highlight">Architecture</a><ul><li><a href="#secrets" class="table-of-contents__link toc-highlight">Secrets</a></li><li><a href="#deployment" class="table-of-contents__link toc-highlight">Deployment</a></li><li><a href="#runtime" class="table-of-contents__link toc-highlight">Runtime</a></li><li><a href="#service-discovery" class="table-of-contents__link toc-highlight">Service Discovery</a></li></ul></li><li><a href="#managed-storage" class="table-of-contents__link toc-highlight">Managed Storage</a><ul><li><a href="#managed-postgres" class="table-of-contents__link toc-highlight">Managed Postgres</a></li><li><a href="#managed-redis" class="table-of-contents__link toc-highlight">Managed Redis</a></li><li><a href="#managed-llms" class="table-of-contents__link toc-highlight">Managed LLMs</a></li><li><a href="#managed-mongodb" class="table-of-contents__link toc-highlight">Managed MongoDB</a></li><li><a href="#managed-resources" class="table-of-contents__link toc-highlight">Managed Resources</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Sections</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/category/tutorials">Tutorials</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/category/providers">Providers</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/category/cli">CLI Reference</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/category/concepts">Concepts</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/ask">Ask Defang</a></li><li class="footer__item"><a href="https://defang.io/samples" target="_blank" rel="noopener noreferrer" class="footer__link-item">Samples<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/DefangLabs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://s.defang.io/discord" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://twitter.com/DefangLabs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/defang/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/@DefangLabs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div></div></footer></div>
</body>
</html>